# è”ç½‘æœç´¢åŠŸèƒ½éƒ¨ç½²æ¸…å•

## ğŸ“‹ éƒ¨ç½²å‰æ£€æŸ¥

### 1. ä»£ç æ–‡ä»¶ç¡®è®¤

- [x] `backend/routes/chat.py` - åç«¯APIå·²æ›´æ–°
- [x] `js/chat.js` - å‰ç«¯é€»è¾‘å·²æ›´æ–°
- [x] `frontend/css/base/animations.css` - åŠ¨ç”»æ ·å¼å·²æ›´æ–°
- [x] æ‰€æœ‰æ–‡ä»¶æ— è¯­æ³•é”™è¯¯

### 2. ä¾èµ–æ£€æŸ¥

- [ ] æ™ºè°±AI SDKç‰ˆæœ¬æ”¯æŒ web_search åŠŸèƒ½
- [ ] APIå¯†é’¥æœ‰ç½‘ç»œæœç´¢æƒé™
- [ ] Python requestsåº“å·²å®‰è£…

### 3. é…ç½®æ£€æŸ¥

- [ ] APIå¯†é’¥é…ç½®æ­£ç¡®
- [ ] ç¯å¢ƒå˜é‡è®¾ç½®æ­£ç¡®
- [ ] ç½‘ç»œè¿æ¥æ­£å¸¸

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1ï¼šå¤‡ä»½ç°æœ‰ä»£ç 

```bash
# å¤‡ä»½å…³é”®æ–‡ä»¶
cp backend/routes/chat.py backend/routes/chat.py.backup
cp js/chat.js js/chat.js.backup
cp frontend/css/base/animations.css frontend/css/base/animations.css.backup
```

### æ­¥éª¤2ï¼šéƒ¨ç½²åç«¯

```bash
# 1. ç¡®è®¤åç«¯æ–‡ä»¶å·²æ›´æ–°
git status backend/routes/chat.py

# 2. é‡å¯Flaskåº”ç”¨
# æ–¹æ³•1ï¼šå¦‚æœä½¿ç”¨systemd
sudo systemctl restart your-app-name

# æ–¹æ³•2ï¼šå¦‚æœä½¿ç”¨supervisor
sudo supervisorctl restart your-app-name

# æ–¹æ³•3ï¼šå¦‚æœæ˜¯å¼€å‘ç¯å¢ƒ
# åœæ­¢å½“å‰è¿›ç¨‹ï¼Œç„¶åé‡æ–°è¿è¡Œ
python app.py
```

### æ­¥éª¤3ï¼šéƒ¨ç½²å‰ç«¯

```bash
# 1. ç¡®è®¤å‰ç«¯æ–‡ä»¶å·²æ›´æ–°
git status js/chat.js frontend/css/base/animations.css

# 2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
# æˆ–è€…æ·»åŠ ç‰ˆæœ¬å·åˆ°æ–‡ä»¶å¼•ç”¨
# <script src="js/chat.js?v=1.1"></script>

# 3. å¦‚æœä½¿ç”¨CDNï¼Œåˆ·æ–°CDNç¼“å­˜
```

### æ­¥éª¤4ï¼šéªŒè¯éƒ¨ç½²

```bash
# 1. æ£€æŸ¥åç«¯API
curl -X POST http://your-domain/stream_chat \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d '{
    "model": "glm-4-air",
    "messages": [{"role": "user", "content": "æµ‹è¯•"}],
    "enable_web_search": true,
    "search_engine": "search_pro",
    "search_count": 5,
    "content_size": "medium"
  }'

# 2. æ£€æŸ¥å‰ç«¯åŠ è½½
# æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰JavaScripté”™è¯¯
```

## âœ… åŠŸèƒ½æµ‹è¯•æ¸…å•

### åŸºç¡€åŠŸèƒ½æµ‹è¯•

- [ ] æœç´¢æŒ‰é’®æ˜¾ç¤ºæ­£å¸¸
- [ ] ç‚¹å‡»æœç´¢æŒ‰é’®ï¼Œé…ç½®å¼¹çª—æ­£å¸¸æ˜¾ç¤º
- [ ] ä¿®æ”¹é…ç½®å‚æ•°ï¼Œä¿å­˜åŠŸèƒ½æ­£å¸¸
- [ ] å¯ç”¨æœç´¢åï¼Œè§†è§‰åé¦ˆæ­£å¸¸ï¼ˆæŒ‰é’®é«˜äº®ã€æŒ‡ç¤ºå™¨æ˜¾ç¤ºï¼‰
- [ ] å…³é—­æœç´¢ï¼Œè§†è§‰åé¦ˆæ­£å¸¸ï¼ˆæŒ‰é’®æ¢å¤ã€æŒ‡ç¤ºå™¨æ¶ˆå¤±ï¼‰

### æœç´¢åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹1ï¼šæœ€æ–°èµ„è®¯æŸ¥è¯¢
```
è¾“å…¥ï¼š2025å¹´1æœˆæœ‰å“ªäº›é‡è¦çš„ç§‘æŠ€æ–°é—»ï¼Ÿ
é¢„æœŸï¼š
- AIè°ƒç”¨ç½‘ç»œæœç´¢
- è¿”å›æœ€æ–°æ–°é—»
- åŒ…å«æ¥æºé“¾æ¥
```

#### æµ‹è¯•ç”¨ä¾‹2ï¼šä¸“ä¸šé¢†åŸŸæŸ¥è¯¢
```
è¾“å…¥ï¼šæœ€æ–°çš„äººå·¥æ™ºèƒ½å¤§æ¨¡å‹æœ‰å“ªäº›çªç ´ï¼Ÿ
é¢„æœŸï¼š
- AIè°ƒç”¨ç½‘ç»œæœç´¢
- è¿”å›ä¸“ä¸šå†…å®¹
- åŒ…å«æ¥æºæ ‡æ³¨
```

#### æµ‹è¯•ç”¨ä¾‹3ï¼šä¸€èˆ¬æ€§é—®ç­”
```
è¾“å…¥ï¼šä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ï¼Ÿ
é¢„æœŸï¼š
- AIå¯èƒ½ä¸è°ƒç”¨æœç´¢ï¼ˆæ™ºèƒ½åˆ¤æ–­ï¼‰
- è¿”å›å‡†ç¡®å›ç­”
```

### é…ç½®æµ‹è¯•

- [ ] æµ‹è¯•æ™ºè°±åŸºç¡€ç‰ˆæœç´¢å¼•æ“
- [ ] æµ‹è¯•æ™ºè°±é«˜çº§ç‰ˆæœç´¢å¼•æ“
- [ ] æµ‹è¯•æœç‹—æœç´¢å¼•æ“
- [ ] æµ‹è¯•å¤¸å…‹æœç´¢å¼•æ“
- [ ] æµ‹è¯•ä¸åŒç»“æœæ•°é‡ï¼ˆ1, 5, 10, 20æ¡ï¼‰
- [ ] æµ‹è¯•ä¸åŒå†…å®¹é•¿åº¦ï¼ˆä¸­ç­‰ã€è¯¦ç»†ï¼‰

### æ€§èƒ½æµ‹è¯•

- [ ] æµ‹è¯•æœç´¢å“åº”æ—¶é—´
- [ ] æµ‹è¯•æµå¼å“åº”æµç•…åº¦
- [ ] æµ‹è¯•å¹¶å‘è¯·æ±‚å¤„ç†
- [ ] æµ‹è¯•é”™è¯¯å¤„ç†ï¼ˆç½‘ç»œé”™è¯¯ã€APIé”™è¯¯ï¼‰

### å…¼å®¹æ€§æµ‹è¯•

- [ ] Chromeæµè§ˆå™¨æµ‹è¯•
- [ ] Firefoxæµè§ˆå™¨æµ‹è¯•
- [ ] Safariæµè§ˆå™¨æµ‹è¯•
- [ ] Edgeæµè§ˆå™¨æµ‹è¯•
- [ ] ç§»åŠ¨ç«¯æµè§ˆå™¨æµ‹è¯•

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šæœç´¢æŒ‰é’®ç‚¹å‡»æ— ååº”

**å¯èƒ½åŸå› ï¼š**
- JavaScriptæ–‡ä»¶æœªæ­£ç¡®åŠ è½½
- äº‹ä»¶ç›‘å¬å™¨æœªç»‘å®š

**è§£å†³æ–¹æ³•ï¼š**
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°æ£€æŸ¥
console.log(typeof handleSearch); // åº”è¯¥è¿”å› "function"
console.log(appState.chat.searchMode); // åº”è¯¥è¿”å›æœç´¢é…ç½®å¯¹è±¡
```

### é—®é¢˜2ï¼šé…ç½®å¼¹çª—ä¸æ˜¾ç¤º

**å¯èƒ½åŸå› ï¼š**
- CSSæ ·å¼å†²çª
- z-indexå±‚çº§é—®é¢˜

**è§£å†³æ–¹æ³•ï¼š**
```javascript
// æ£€æŸ¥å¼¹çª—æ˜¯å¦åˆ›å»º
document.querySelector('.search-config-popup');
```

### é—®é¢˜3ï¼šæœç´¢åŠŸèƒ½ä¸ç”Ÿæ•ˆ

**å¯èƒ½åŸå› ï¼š**
- åç«¯APIæœªæ›´æ–°
- å‚æ•°ä¼ é€’é”™è¯¯
- APIå¯†é’¥æƒé™ä¸è¶³

**è§£å†³æ–¹æ³•ï¼š**
```bash
# æ£€æŸ¥åç«¯æ—¥å¿—
tail -f /path/to/your/app.log

# æ£€æŸ¥APIè¯·æ±‚
# åœ¨æµè§ˆå™¨Networkæ ‡ç­¾æŸ¥çœ‹è¯·æ±‚å‚æ•°
```

### é—®é¢˜4ï¼šæœç´¢ç»“æœæ— æ¥æºé“¾æ¥

**å¯èƒ½åŸå› ï¼š**
- æœç´¢å¼•æ“è¿”å›æ ¼å¼é—®é¢˜
- AIæœªæ­£ç¡®è§£ææœç´¢ç»“æœ

**è§£å†³æ–¹æ³•ï¼š**
- æ£€æŸ¥åç«¯è¿”å›çš„æœç´¢ç»“æœæ ¼å¼
- ç¡®è®¤ `search_result: True` å‚æ•°å·²è®¾ç½®

## ğŸ“Š ç›‘æ§æŒ‡æ ‡

### å…³é”®æŒ‡æ ‡

1. **æœç´¢è°ƒç”¨æ¬¡æ•°**
   - æ¯æ—¥æœç´¢è°ƒç”¨æ€»æ•°
   - æ¯ç”¨æˆ·å¹³å‡æœç´¢æ¬¡æ•°

2. **æœç´¢æˆåŠŸç‡**
   - æˆåŠŸè°ƒç”¨ / æ€»è°ƒç”¨æ¬¡æ•°
   - ç›®æ ‡ï¼š> 95%

3. **å“åº”æ—¶é—´**
   - å¹³å‡æœç´¢å“åº”æ—¶é—´
   - ç›®æ ‡ï¼š< 5ç§’

4. **é”™è¯¯ç‡**
   - APIé”™è¯¯æ¬¡æ•°
   - ç½‘ç»œé”™è¯¯æ¬¡æ•°
   - ç›®æ ‡ï¼š< 1%

### ç›‘æ§æ–¹æ³•

```python
# åœ¨åç«¯æ·»åŠ æ—¥å¿—è®°å½•
import logging

logger = logging.getLogger(__name__)

# è®°å½•æœç´¢è°ƒç”¨
logger.info(f"Web search called: engine={search_engine}, count={count}")

# è®°å½•æœç´¢ç»“æœ
logger.info(f"Web search completed: results={len(results)}, time={elapsed_time}s")

# è®°å½•é”™è¯¯
logger.error(f"Web search failed: {error_message}")
```

## ğŸ”„ å›æ»šè®¡åˆ’

å¦‚æœéƒ¨ç½²åå‡ºç°ä¸¥é‡é—®é¢˜ï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤å›æ»šï¼š

### æ­¥éª¤1ï¼šæ¢å¤ä»£ç 

```bash
# æ¢å¤åç«¯
cp backend/routes/chat.py.backup backend/routes/chat.py

# æ¢å¤å‰ç«¯
cp js/chat.js.backup js/chat.js
cp frontend/css/base/animations.css.backup frontend/css/base/animations.css
```

### æ­¥éª¤2ï¼šé‡å¯æœåŠ¡

```bash
# é‡å¯åç«¯æœåŠ¡
sudo systemctl restart your-app-name

# æ¸…é™¤å‰ç«¯ç¼“å­˜
# é€šçŸ¥ç”¨æˆ·åˆ·æ–°æµè§ˆå™¨
```

### æ­¥éª¤3ï¼šéªŒè¯å›æ»š

- [ ] æ£€æŸ¥åº”ç”¨æ˜¯å¦æ­£å¸¸è¿è¡Œ
- [ ] æ£€æŸ¥åŸæœ‰åŠŸèƒ½æ˜¯å¦æ­£å¸¸
- [ ] é€šçŸ¥ç”¨æˆ·å›æ»šå®Œæˆ

## ğŸ“ éƒ¨ç½²è®°å½•

### éƒ¨ç½²ä¿¡æ¯

- **éƒ¨ç½²æ—¥æœŸ**ï¼š____________________
- **éƒ¨ç½²äººå‘˜**ï¼š____________________
- **éƒ¨ç½²ç¯å¢ƒ**ï¼šâ–¡ å¼€å‘ â–¡ æµ‹è¯• â–¡ ç”Ÿäº§
- **ç‰ˆæœ¬å·**ï¼šv1.0

### éƒ¨ç½²ç»“æœ

- [ ] éƒ¨ç½²æˆåŠŸ
- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡
- [ ] ç”¨æˆ·éªŒæ”¶é€šè¿‡

### é—®é¢˜è®°å½•

| é—®é¢˜æè¿° | è§£å†³æ–¹æ³• | çŠ¶æ€ |
|---------|---------|------|
|         |         |      |
|         |         |      |

### å¤‡æ³¨

_____________________________________
_____________________________________
_____________________________________

## ğŸ“ è”ç³»æ–¹å¼

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·è”ç³»ï¼š
- **æŠ€æœ¯è´Ÿè´£äºº**ï¼š____________________
- **ç´§æ€¥è”ç³»**ï¼š____________________

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
**æ›´æ–°æ—¶é—´**ï¼š2026-01-24
