# 功能八：交互式标注 - 快速指南

## 🎯 核心功能

### 1. 智能偏移显示
- ✅ 标注框自动偏移，不遮挡原始标记
- ✅ 虚线连接标注和识别位置
- ✅ 清晰显示对应关系

### 2. 拖动调整
- 🖱️ 点击标注框拖动到任意位置
- 🖱️ 连线实时跟随
- 🖱️ 鼠标悬停显示移动图标

### 3. 编辑标注
- ✏️ 双击标注框编辑名称
- ✏️ 支持修改部件名称
- ✏️ 立即更新显示

### 4. 视觉反馈
- 🟢 **绿色框** = 普通标注
- 🔵 **蓝色框** = 选中状态（可拖动）
- 🟠 **橙色框** = 鼠标悬停
- 🔴 **红色圆点** = OCR识别位置
- ⚪ **虚线** = 连接线

### 5. 导出功能
- 💾 导出包含所有标注的PNG图片
- 💾 保留当前标注位置和编辑内容

## 📝 使用步骤

### 基本流程
```
1. 上传图片 → 2. 输入说明书 → 3. 开始处理 → 4. 交互标注 → 5. 导出图片
```

### 详细操作

#### 步骤1：上传和处理
1. 点击"功能八：专利附图标记"
2. 上传专利附图（支持拖拽、粘贴）
3. 输入说明书内容
4. 点击"开始处理"按钮

#### 步骤2：查看结果
- 系统自动识别数字标记
- 显示识别统计信息
- 展示交互式标注图

#### 步骤3：调整标注
- **拖动**：点击标注框拖动到合适位置
- **编辑**：双击标注框修改名称
- **查看**：鼠标悬停查看详细信息

#### 步骤4：导出保存
- 点击"导出图片"按钮
- 自动下载PNG格式图片
- 包含所有标注和连线

## 🎨 交互说明

### 鼠标操作
| 操作 | 效果 |
|------|------|
| 悬停标注框 | 橙色高亮 + 移动光标 |
| 点击标注框 | 蓝色选中 + 显示提示 |
| 拖动标注框 | 移动位置 + 连线跟随 |
| 双击标注框 | 弹出编辑对话框 |
| 点击空白处 | 取消选中 |

### 颜色含义
- 🟢 **绿色** = 正常状态，可以拖动
- 🔵 **蓝色** = 已选中，正在操作
- 🟠 **橙色** = 鼠标悬停，准备操作
- 🔴 **红点** = OCR识别的原始位置

### 连线样式
- **虚线** = 普通连接（灰色）
- **实线** = 选中连接（蓝色粗线）
- **橙线** = 悬停连接（橙色）

## 🚀 快速测试

### 本地测试
```bash
# 在浏览器中打开
test_interactive_marker.html
```

### 服务器部署
```bash
# 运行部署脚本
deploy_interactive_marker.bat
```

### 在线测试
1. 访问：http://43.99.101.195
2. 进入"功能八：专利附图标记"
3. 上传测试图片（tests/test patent pic.png）
4. 输入说明书内容
5. 点击"开始处理"
6. 尝试拖动和编辑标注

## 💡 使用技巧

### 技巧1：避免遮挡
- 标注框会自动偏移，但可能不够理想
- 手动拖动到最佳位置
- 建议放在图片空白区域

### 技巧2：批量编辑
- 双击每个标注框逐个编辑
- 修改后立即生效
- 可以随时重新编辑

### 技巧3：导出前检查
- 拖动所有标注到合适位置
- 确认所有名称正确
- 然后点击导出

### 技巧4：多图处理
- 每张图片独立标注
- 可以分别调整
- 分别导出

## 🔧 故障排除

### 问题1：标注无法拖动
**原因**：可能点击位置不准确
**解决**：点击标注框中心位置

### 问题2：双击无反应
**原因**：双击速度太慢
**解决**：快速双击标注框

### 问题3：连线显示异常
**原因**：浏览器缓存问题
**解决**：按 Ctrl+F5 强制刷新

### 问题4：导出图片模糊
**原因**：Canvas分辨率问题
**解决**：使用原始大小图片

## 📊 技术参数

### 性能指标
- 响应时间：< 50ms
- 拖动流畅度：60 FPS
- 支持标注数：无限制
- 图片大小：< 10MB

### 浏览器支持
- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Edge 90+
- ✅ Safari 14+

### 文件格式
- 输入：PNG, JPG, GIF
- 输出：PNG（带透明度）

## 📞 联系支持

如有问题，请查看：
- 📖 完整文档：`功能八交互式标注完成.md`
- 🧪 测试文件：`test_interactive_marker.html`
- 🚀 部署脚本：`deploy_interactive_marker.bat`

---

**版本**: v1.0
**更新时间**: 2026-01-30
**状态**: ✅ 开发完成，可以部署
