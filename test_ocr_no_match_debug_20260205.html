<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OCRæ— åŒ¹é…è°ƒè¯•é¢æ¿æµ‹è¯• - 2026-02-05</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #FFA500;
            padding-bottom: 10px;
        }
        h2 {
            color: #FFA500;
            margin-top: 0;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.warning {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        .status.info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        button {
            background-color: #FFA500;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:hover {
            background-color: #FF8C00;
        }
        .result-box {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
            max-height: 400px;
            overflow-y: auto;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            border: 1px solid #ddd;
            text-align: left;
        }
        .comparison-table th {
            background-color: #FFA500;
            color: white;
        }
        .comparison-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .before {
            color: #dc3545;
        }
        .after {
            color: #28a745;
        }
        pre {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>ğŸ” OCRæ— åŒ¹é…è°ƒè¯•é¢æ¿æµ‹è¯• - 2026-02-05</h1>

    <div class="test-section">
        <h2>ğŸ¯ ä¿®å¤ç›®æ ‡</h2>
        <div class="status info">
            <strong>é—®é¢˜ï¼š</strong> å½“OCRè¯†åˆ«åˆ°æ ‡è®°ä½†è¯´æ˜ä¹¦æ²¡æœ‰åŒ¹é…æ—¶ï¼Œç”¨æˆ·æ— æ³•æ‰“å¼€è°ƒè¯•é¢æ¿æŸ¥çœ‹OCRè¯†åˆ«çš„å†…å®¹ã€‚
        </div>
        <div class="status success">
            <strong>è§£å†³æ–¹æ¡ˆï¼š</strong> ä¿®æ”¹å‰ç«¯é€»è¾‘ï¼Œå³ä½¿æ²¡æœ‰åŒ¹é…ç»“æœï¼Œåªè¦æœ‰OCRè¯†åˆ«ç»“æœï¼Œå°±å…è®¸æ‰“å¼€å¤šå›¾æŸ¥çœ‹å™¨å’Œè°ƒè¯•é¢æ¿ã€‚
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ“Š ä¿®å¤å‰åå¯¹æ¯”</h2>
        <table class="comparison-table">
            <thead>
                <tr>
                    <th>åœºæ™¯</th>
                    <th>ä¿®å¤å‰</th>
                    <th>ä¿®å¤å</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>OCRè¯†åˆ«5ä¸ªï¼ŒåŒ¹é…0ä¸ª</strong></td>
                    <td class="before">âŒ æ˜¾ç¤º"æœªè¯†åˆ«åˆ°ä»»ä½•æ•°å­—åºå·"<br>âŒ æ— æ³•æ‰“å¼€æŸ¥çœ‹å™¨<br>âŒ æ— æ³•æŸ¥çœ‹OCRç»“æœ</td>
                    <td class="after">âœ… æ˜¾ç¤º"OCRè¯†åˆ«: 5ä¸ª | åŒ¹é…: 0ä¸ª"<br>âœ… å¯ä»¥æ‰“å¼€æŸ¥çœ‹å™¨<br>âœ… å¯ä»¥æŸ¥çœ‹è°ƒè¯•é¢æ¿<br>âœ… æ©™è‰²æ˜¾ç¤ºæœªåŒ¹é…æ ‡è®°</td>
                </tr>
                <tr>
                    <td><strong>OCRè¯†åˆ«5ä¸ªï¼ŒåŒ¹é…3ä¸ª</strong></td>
                    <td class="before">âœ… å¯ä»¥æ‰“å¼€æŸ¥çœ‹å™¨<br>âš ï¸ æœªåŒ¹é…çš„2ä¸ªä¸æ˜¾ç¤º</td>
                    <td class="after">âœ… å¯ä»¥æ‰“å¼€æŸ¥çœ‹å™¨<br>âœ… 3ä¸ªçº¢è‰²ï¼ˆå·²åŒ¹é…ï¼‰<br>âœ… 2ä¸ªæ©™è‰²ï¼ˆæœªåŒ¹é…ï¼‰<br>âœ… è°ƒè¯•é¢æ¿åˆ†ç±»æ˜¾ç¤º</td>
                </tr>
                <tr>
                    <td><strong>OCRè¯†åˆ«0ä¸ª</strong></td>
                    <td class="before">âŒ æ˜¾ç¤º"æœªè¯†åˆ«åˆ°ä»»ä½•æ•°å­—åºå·"</td>
                    <td class="after">âŒ æ˜¾ç¤º"æœªè¯†åˆ«åˆ°ä»»ä½•æ•°å­—åºå·"<br>ï¼ˆä¿æŒä¸å˜ï¼Œå› ä¸ºç¡®å®æ²¡æœ‰OCRç»“æœï¼‰</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="test-section">
        <h2>ğŸ”§ ä»£ç ä¿®æ”¹</h2>
        
        <h3>1. æ£€æŸ¥é€»è¾‘ä¼˜åŒ–</h3>
        <div class="status info">
            <strong>ä¿®å¤å‰ï¼š</strong>
            <pre>if (data.total_numbers === 0) {
    // ç›´æ¥è¿”å›ï¼Œä¸åˆ›å»ºæŸ¥çœ‹å™¨
    return;
}</pre>
        </div>
        <div class="status success">
            <strong>ä¿®å¤åï¼š</strong>
            <pre>const hasOcrResults = data.ocr_detected_count > 0 || data.total_numbers > 0;
const hasMatchedResults = data.matched_count > 0 || data.total_numbers > 0;

if (!hasOcrResults) {
    // åªæœ‰å®Œå…¨æ²¡æœ‰OCRç»“æœæ—¶æ‰è¿”å›
    return;
}

// å³ä½¿æ²¡æœ‰åŒ¹é…ç»“æœï¼Œåªè¦æœ‰OCRç»“æœï¼Œå°±åˆ›å»ºæŸ¥çœ‹å™¨</pre>
        </div>

        <h3>2. æŒ‰é’®å’Œæç¤ºä¼˜åŒ–</h3>
        <div class="status success">
            <strong>æ–°å¢ï¼š</strong> æ ¹æ®åŒ¹é…æƒ…å†µæ˜¾ç¤ºä¸åŒçš„æŒ‰é’®æ ·å¼å’Œæç¤º
            <pre>if (!hasMatchedResults && hasOcrResults) {
    // æœ‰OCRè¯†åˆ«ä½†æ²¡æœ‰åŒ¹é…
    buttonText = 'ğŸ” æŸ¥çœ‹OCRè¯†åˆ«ç»“æœ';
    buttonStyle = 'æ©™è‰²æ¸å˜èƒŒæ™¯';
    tipHtml = 'âš ï¸ æç¤ºï¼šOCRè¯†åˆ«åˆ°æ ‡è®°ï¼Œä½†è¯´æ˜ä¹¦æœªåŒ¹é…...';
}</pre>
        </div>

        <h3>3. ç»Ÿè®¡ä¿¡æ¯ä¼˜åŒ–</h3>
        <div class="status success">
            <strong>æ–°å¢ï¼š</strong> åˆ†åˆ«æ˜¾ç¤ºOCRè¯†åˆ«æ•°å’Œè¯´æ˜ä¹¦åŒ¹é…æ•°
            <pre>OCRè¯†åˆ«: ${data.ocr_detected_count}
è¯´æ˜ä¹¦åŒ¹é…: ${data.matched_count}
å¹³å‡ç½®ä¿¡åº¦: ${data.avg_confidence}%</pre>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ§ª æµ‹è¯•åœºæ™¯</h2>
        
        <h3>åœºæ™¯1: OCRè¯†åˆ«æˆåŠŸï¼Œè¯´æ˜ä¹¦å®Œå…¨ä¸åŒ¹é…</h3>
        <div class="status warning">
            <strong>æ¨¡æ‹Ÿæ•°æ®ï¼š</strong>
            <ul>
                <li>OCRè¯†åˆ«: 5ä¸ªæ ‡è®° (10, 20, 30, 40, 50)</li>
                <li>è¯´æ˜ä¹¦åŒ¹é…: 0ä¸ª</li>
                <li>æœªåŒ¹é…: 5ä¸ª</li>
            </ul>
        </div>
        <button onclick="testScenario1()">æµ‹è¯•åœºæ™¯1</button>
        <div id="result1" class="result-box" style="display:none;"></div>

        <h3>åœºæ™¯2: OCRè¯†åˆ«æˆåŠŸï¼Œè¯´æ˜ä¹¦éƒ¨åˆ†åŒ¹é…</h3>
        <div class="status warning">
            <strong>æ¨¡æ‹Ÿæ•°æ®ï¼š</strong>
            <ul>
                <li>OCRè¯†åˆ«: 5ä¸ªæ ‡è®° (10, 20, 30, 40, 50)</li>
                <li>è¯´æ˜ä¹¦åŒ¹é…: 3ä¸ª (10, 20, 30)</li>
                <li>æœªåŒ¹é…: 2ä¸ª (40, 50)</li>
            </ul>
        </div>
        <button onclick="testScenario2()">æµ‹è¯•åœºæ™¯2</button>
        <div id="result2" class="result-box" style="display:none;"></div>

        <h3>åœºæ™¯3: OCRå®Œå…¨æœªè¯†åˆ«</h3>
        <div class="status warning">
            <strong>æ¨¡æ‹Ÿæ•°æ®ï¼š</strong>
            <ul>
                <li>OCRè¯†åˆ«: 0ä¸ª</li>
                <li>è¯´æ˜ä¹¦åŒ¹é…: 0ä¸ª</li>
            </ul>
        </div>
        <button onclick="testScenario3()">æµ‹è¯•åœºæ™¯3</button>
        <div id="result3" class="result-box" style="display:none;"></div>
    </div>

    <div class="test-section">
        <h2>âœ… éªŒè¯æ¸…å•</h2>
        <ol style="line-height: 2;">
            <li>âœ… å½“OCRè¯†åˆ«åˆ°æ ‡è®°ä½†è¯´æ˜ä¹¦æœªåŒ¹é…æ—¶ï¼Œå¯ä»¥æ‰“å¼€å¤šå›¾æŸ¥çœ‹å™¨</li>
            <li>âœ… æŒ‰é’®æ˜¾ç¤ºä¸ºæ©™è‰²ï¼Œæ–‡å­—ä¸º"ğŸ” æŸ¥çœ‹OCRè¯†åˆ«ç»“æœ"</li>
            <li>âœ… æ˜¾ç¤ºæç¤ºä¿¡æ¯ï¼š"OCRè¯†åˆ«åˆ°Xä¸ªæ ‡è®°ï¼Œä½†è¯´æ˜ä¹¦æœªåŒ¹é…"</li>
            <li>âœ… æœªåŒ¹é…çš„æ ‡è®°æ˜¾ç¤ºä¸ºæ©™è‰²</li>
            <li>âœ… å¯ä»¥ç‚¹å‡»"è°ƒè¯•é¢æ¿"æŒ‰é’®</li>
            <li>âœ… è°ƒè¯•é¢æ¿åˆ†ç±»æ˜¾ç¤ºï¼šå·²åŒ¹é…ã€æœªåŒ¹é…ã€æ‰‹åŠ¨æ·»åŠ </li>
            <li>âœ… ç»Ÿè®¡ä¿¡æ¯æ˜¾ç¤ºï¼šOCRè¯†åˆ«æ•°ã€è¯´æ˜ä¹¦åŒ¹é…æ•°ã€å¹³å‡ç½®ä¿¡åº¦</li>
            <li>âœ… å½“å®Œå…¨æ²¡æœ‰OCRè¯†åˆ«æ—¶ï¼Œä»ç„¶æ˜¾ç¤º"æœªè¯†åˆ«åˆ°ä»»ä½•æ•°å­—åºå·"</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶</h2>
        <ul>
            <li><strong>frontend/index.html</strong> - displayProcessingResultå‡½æ•°
                <ul>
                    <li>ä¿®æ”¹æ£€æŸ¥é€»è¾‘ï¼šä½¿ç”¨ocr_detected_countè€Œä¸æ˜¯total_numbers</li>
                    <li>æ·»åŠ æŒ‰é’®æ ·å¼å’Œæç¤ºçš„æ¡ä»¶åˆ¤æ–­</li>
                    <li>æ›´æ–°ç»Ÿè®¡ä¿¡æ¯æ˜¾ç¤º</li>
                </ul>
            </li>
        </ul>
    </div>

    <script>
        function testScenario1() {
            const result = {
                canOpenViewer: true,
                buttonText: "ğŸ” æŸ¥çœ‹OCRè¯†åˆ«ç»“æœ (1å¼ å›¾ç‰‡)",
                buttonColor: "æ©™è‰²æ¸å˜",
                tipMessage: "âš ï¸ æç¤ºï¼šOCRè¯†åˆ«åˆ° 5 ä¸ªæ ‡è®°ï¼Œä½†è¯´æ˜ä¹¦æœªåŒ¹é…ã€‚ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¯æŸ¥çœ‹OCRè¯†åˆ«çš„æ‰€æœ‰æ ‡è®°ï¼ˆæ©™è‰²æ˜¾ç¤ºï¼‰ï¼Œå¹¶ä½¿ç”¨è°ƒè¯•é¢æ¿äº†è§£è¯¦æƒ…ã€‚",
                statistics: {
                    ocr_detected: 5,
                    matched: 0,
                    avg_confidence: 88
                },
                annotations: [
                    {number: "10", name: "(è¯´æ˜ä¹¦æœªåŒ¹é…)", is_matched: false, color: "æ©™è‰²"},
                    {number: "20", name: "(è¯´æ˜ä¹¦æœªåŒ¹é…)", is_matched: false, color: "æ©™è‰²"},
                    {number: "30", name: "(è¯´æ˜ä¹¦æœªåŒ¹é…)", is_matched: false, color: "æ©™è‰²"},
                    {number: "40", name: "(è¯´æ˜ä¹¦æœªåŒ¹é…)", is_matched: false, color: "æ©™è‰²"},
                    {number: "50", name: "(è¯´æ˜ä¹¦æœªåŒ¹é…)", is_matched: false, color: "æ©™è‰²"}
                ]
            };
            displayResult('result1', result, 'åœºæ™¯1ï¼šOCRè¯†åˆ«æˆåŠŸï¼Œè¯´æ˜ä¹¦å®Œå…¨ä¸åŒ¹é…');
        }

        function testScenario2() {
            const result = {
                canOpenViewer: true,
                buttonText: "æ‰“å¼€å¤šå›¾æŸ¥çœ‹å™¨ (1å¼ å›¾ç‰‡)",
                buttonColor: "ç»¿è‰²æ¸å˜",
                tipMessage: "",
                statistics: {
                    ocr_detected: 5,
                    matched: 3,
                    avg_confidence: 90
                },
                annotations: [
                    {number: "10", name: "å¤–å£³", is_matched: true, color: "çº¢è‰²"},
                    {number: "20", name: "æ˜¾ç¤ºå±", is_matched: true, color: "çº¢è‰²"},
                    {number: "30", name: "æŒ‰é”®", is_matched: true, color: "çº¢è‰²"},
                    {number: "40", name: "(è¯´æ˜ä¹¦æœªåŒ¹é…)", is_matched: false, color: "æ©™è‰²"},
                    {number: "50", name: "(è¯´æ˜ä¹¦æœªåŒ¹é…)", is_matched: false, color: "æ©™è‰²"}
                ]
            };
            displayResult('result2', result, 'åœºæ™¯2ï¼šOCRè¯†åˆ«æˆåŠŸï¼Œè¯´æ˜ä¹¦éƒ¨åˆ†åŒ¹é…');
        }

        function testScenario3() {
            const result = {
                canOpenViewer: false,
                buttonText: "æ— ",
                buttonColor: "æ— ",
                tipMessage: "âŒ æœªè¯†åˆ«åˆ°ä»»ä½•æ•°å­—åºå·",
                statistics: {
                    ocr_detected: 0,
                    matched: 0,
                    avg_confidence: 0
                },
                annotations: []
            };
            displayResult('result3', result, 'åœºæ™¯3ï¼šOCRå®Œå…¨æœªè¯†åˆ«');
        }

        function displayResult(elementId, result, title) {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            
            let html = `<h4>${title}</h4>`;
            
            html += `<h5>ğŸ“Š ç»Ÿè®¡ä¿¡æ¯ï¼š</h5>`;
            html += `<ul>`;
            html += `<li><strong>OCRè¯†åˆ«ï¼š</strong> ${result.statistics.ocr_detected} ä¸ª</li>`;
            html += `<li><strong>è¯´æ˜ä¹¦åŒ¹é…ï¼š</strong> ${result.statistics.matched} ä¸ª</li>`;
            html += `<li><strong>å¹³å‡ç½®ä¿¡åº¦ï¼š</strong> ${result.statistics.avg_confidence}%</li>`;
            html += `</ul>`;
            
            html += `<h5>ğŸ¨ ç•Œé¢æ˜¾ç¤ºï¼š</h5>`;
            html += `<ul>`;
            html += `<li><strong>å¯ä»¥æ‰“å¼€æŸ¥çœ‹å™¨ï¼š</strong> ${result.canOpenViewer ? 'âœ… æ˜¯' : 'âŒ å¦'}</li>`;
            html += `<li><strong>æŒ‰é’®æ–‡å­—ï¼š</strong> ${result.buttonText}</li>`;
            html += `<li><strong>æŒ‰é’®é¢œè‰²ï¼š</strong> ${result.buttonColor}</li>`;
            if (result.tipMessage) {
                html += `<li><strong>æç¤ºä¿¡æ¯ï¼š</strong> ${result.tipMessage}</li>`;
            }
            html += `</ul>`;
            
            if (result.annotations.length > 0) {
                html += `<h5>ğŸ·ï¸ æ ‡æ³¨åˆ—è¡¨ï¼š</h5>`;
                html += `<table style="width: 100%; border-collapse: collapse;">`;
                html += `<tr style="background-color: #f0f0f0;"><th style="padding: 8px; border: 1px solid #ddd;">æ ‡è®°</th><th style="padding: 8px; border: 1px solid #ddd;">åç§°</th><th style="padding: 8px; border: 1px solid #ddd;">åŒ¹é…çŠ¶æ€</th><th style="padding: 8px; border: 1px solid #ddd;">é¢œè‰²</th></tr>`;
                result.annotations.forEach(ann => {
                    const statusIcon = ann.is_matched ? 'âœ“' : 'âš ';
                    const statusText = ann.is_matched ? 'å·²åŒ¹é…' : 'æœªåŒ¹é…';
                    html += `<tr>`;
                    html += `<td style="padding: 8px; border: 1px solid #ddd;">${ann.number}</td>`;
                    html += `<td style="padding: 8px; border: 1px solid #ddd;">${ann.name}</td>`;
                    html += `<td style="padding: 8px; border: 1px solid #ddd;">${statusIcon} ${statusText}</td>`;
                    html += `<td style="padding: 8px; border: 1px solid #ddd; color: ${ann.color};">â— ${ann.color}</td>`;
                    html += `</tr>`;
                });
                html += `</table>`;
            }
            
            html += `<h5>âœ… éªŒè¯ç»“æœï¼š</h5>`;
            html += `<div class="status success">`;
            if (result.canOpenViewer) {
                html += `<strong>âœ… é€šè¿‡ï¼š</strong> å¯ä»¥æ‰“å¼€å¤šå›¾æŸ¥çœ‹å™¨å’Œè°ƒè¯•é¢æ¿ï¼ŒæŸ¥çœ‹æ‰€æœ‰OCRè¯†åˆ«çš„æ ‡è®°ã€‚`;
            } else {
                html += `<strong>âœ… é€šè¿‡ï¼š</strong> æ²¡æœ‰OCRè¯†åˆ«ç»“æœï¼Œæ­£ç¡®æ˜¾ç¤ºæç¤ºä¿¡æ¯ã€‚`;
            }
            html += `</div>`;
            
            element.innerHTML = html;
        }
    </script>
</body>
</html>
