# 功能八：标记布局算法 - 快速参考 🎯

## 🔄 算法原理

### 三步骤
1. **计算距离** - 标记点到四个边界的距离
2. **找最近边** - 确定最近的边界方向
3. **移动1/3** - 向该方向移动距离的三分之一

### 公式
```
移动距离 = 到最近边界的距离 ÷ 3
```

## 📐 示例计算

### 示例1：左上角标记
- 标记位置：(100, 100)
- 到上边界：100px ← **最近**
- 移动距离：100 ÷ 3 = 33px
- 文字位置：(100, 67) ⬆️

### 示例2：右边缘标记
- 标记位置：(750, 300)
- 到右边界：50px ← **最近**
- 移动距离：50 ÷ 3 = 17px
- 文字位置：(767, 300) ➡️

## ✨ 优势

| 特性 | 效果 |
|------|------|
| 🎯 位置合理 | 不会太远也不会太近 |
| 🎨 视觉平衡 | 整体布局和谐 |
| 📏 距离适中 | 连接线清晰可见 |
| 🔒 边界安全 | 不会紧贴边缘 |

## 🧪 测试文件
`test_label_layout_algorithm.html`

## 📁 核心文件
`frontend/js/multiImageViewer_v8.js` (第1054-1089行)

## 🚀 使用
功能八 → 上传图片 → 自动应用新算法

---
**Commit**: 9f3eb54 | **日期**: 2026-02-05
