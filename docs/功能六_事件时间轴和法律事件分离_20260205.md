# åŠŸèƒ½å…­ï¼šäº‹ä»¶æ—¶é—´è½´å’Œæ³•å¾‹äº‹ä»¶åˆ†ç¦» - 20260205

## ğŸ¯ é—®é¢˜è¯´æ˜

ç”¨æˆ·æŒ‡å‡ºï¼š**äº‹ä»¶æ—¶é—´è½´ï¼ˆEvents Timelineï¼‰å’Œæ³•å¾‹äº‹ä»¶ï¼ˆLegal Eventsï¼‰æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„å­—æ®µï¼**

### Google Patents çš„å®é™…ç»“æ„ï¼š

1. **Events Timelineï¼ˆäº‹ä»¶æ—¶é—´è½´ï¼‰**
   - HTMLæ ‡è®°ï¼š`<dd itemprop="events">`
   - å†…å®¹ï¼šç”³è¯·ã€å…¬å¼€ã€æˆæƒç­‰**å…³é”®äº‹ä»¶**
   - ç¤ºä¾‹ï¼š
     - Application filed (ç”³è¯·æäº¤)
     - Publication of US20210268630A1 (å…¬å¼€)
     - Application granted (æˆæƒ)
     - Publication of US12390907B2 (æˆæƒå…¬å¼€)

2. **Legal Eventsï¼ˆæ³•å¾‹äº‹ä»¶ï¼‰**
   - HTMLæ ‡è®°ï¼š`<tr itemprop="legalEvents">` åœ¨ `<section><h2>Legal Events</h2>`
   - å†…å®¹ï¼šUSPTOçš„**æ³•å¾‹çŠ¶æ€ä»£ç **
   - ç¤ºä¾‹ï¼š
     - FEPP (Fee payment procedure)
     - STPP (Patent prosecution procedure)
     - AS (Assignment)
     - STCF (Information on status: patent grant)

## âœ… ä¿®å¤æ–¹æ¡ˆ

### 1. åç«¯ä¿®æ”¹

#### 1.1 æ•°æ®ç»“æ„ï¼ˆbackend/scraper/simple_scraper.pyï¼‰

```python
@dataclass
class SimplePatentData:
    # ... å…¶ä»–å­—æ®µ ...
    
    # è¿›é˜¶å­—æ®µ
    patent_citations: List[Dict[str, str]] = None  # å¼•ç”¨çš„ä¸“åˆ©
    cited_by: List[Dict[str, str]] = None  # è¢«å¼•ç”¨çš„ä¸“åˆ©
    events_timeline: List[Dict[str, str]] = None  # âœ… æ–°å¢ï¼šäº‹ä»¶æ—¶é—´è½´
    legal_events: List[Dict[str, str]] = None  # âœ… ä¿®æ”¹ï¼šæ³•å¾‹äº‹ä»¶
    similar_documents: List[Dict[str, str]] = None  # ç›¸ä¼¼æ–‡æ¡£
```

#### 1.2 çˆ¬è™«é€»è¾‘ï¼ˆbackend/scraper/simple_scraper.pyï¼‰

**åˆ†ç¦»æå–é€»è¾‘**ï¼š

```python
# æå–äº‹ä»¶æ—¶é—´è½´ï¼ˆEvents Timelineï¼‰
# æŸ¥æ‰¾ <dd itemprop="events">
event_elements = soup.find_all('dd', {'itemprop': 'events'})
for event_dd in event_elements:
    # æå– date, title, type, is_critical, is_current, document_id
    events_timeline.append({...})

patent_data.events_timeline = events_timeline[:20]

# æå–æ³•å¾‹äº‹ä»¶ï¼ˆLegal Eventsï¼‰
# æŸ¥æ‰¾ <tr itemprop="legalEvents">
legal_event_rows = soup.find_all('tr', {'itemprop': 'legalEvents'})
for row in legal_event_rows:
    # æå– date, code, title, description, free_format_text
    legal_events.append({...})

patent_data.legal_events = legal_events[:30]
```

#### 1.3 APIç‰ˆæœ¬æ›´æ–°ï¼ˆbackend/routes/patent.pyï¼‰

```python
@patent_bp.route('/patent/version', methods=['GET'])
def get_version():
    return create_response(data={
        'version': '2.1-events-timeline-split',
        'features': [
            'claims_always_extracted',
            'drawings_three_strategies',
            'patent_citations',
            'cited_by',
            'events_timeline',  # âœ… æ–°å¢
            'legal_events'  # âœ… ç‹¬ç«‹å­—æ®µ
        ],
        'timestamp': '2026-02-05'
    })
```

### 2. å‰ç«¯ä¿®æ”¹

#### 2.1 å­—æ®µé€‰æ‹©å™¨HTMLï¼ˆfrontend/index.htmlï¼‰

```html
<div class="field-group">
    <div class="field-group-title">
        æ³•å¾‹ä¸äº‹ä»¶
        <span class="field-group-badge">å¯é€‰</span>
    </div>
    <div class="field-options-grid">
        <!-- âœ… æ–°å¢ï¼šäº‹ä»¶æ—¶é—´è½´ -->
        <div class="field-option" onclick="toggleFieldOption(this)">
            <input type="checkbox" id="field_events_timeline" checked>
            <span class="field-option-label">
                äº‹ä»¶æ—¶é—´è½´
                <span class="field-option-info">æ¨è</span>
            </span>
        </div>
        <!-- âœ… ä¿®æ”¹ï¼šæ³•å¾‹äº‹ä»¶ -->
        <div class="field-option" onclick="toggleFieldOption(this)">
            <input type="checkbox" id="field_legal_events" checked>
            <span class="field-option-label">
                æ³•å¾‹äº‹ä»¶
                <span class="field-option-info">æ¨è</span>
            </span>
        </div>
        <div class="field-option" onclick="toggleFieldOption(this)">
            <input type="checkbox" id="field_similar_documents">
            <span class="field-option-label">ç›¸ä¼¼æ–‡æ¡£</span>
        </div>
    </div>
</div>
```

#### 2.2 å­—æ®µé€‰æ‹©å‡½æ•°ï¼ˆjs/main.jsï¼‰

```javascript
function getSelectedFields() {
    const fields = {
        // ... å…¶ä»–å­—æ®µ ...
        events_timeline: document.getElementById('field_events_timeline')?.checked || false,  // âœ… æ–°å¢
        legal_events: document.getElementById('field_legal_events')?.checked || false,  // âœ… ä¿ç•™
        // ... å…¶ä»–å­—æ®µ ...
    };
    return fields;
}
```

#### 2.3 æ˜¾ç¤ºé€»è¾‘ï¼ˆjs/patentDetailNewTab.jsï¼‰

**åˆ†åˆ«æ˜¾ç¤ºä¸¤ä¸ªéƒ¨åˆ†**ï¼š

```javascript
// âœ… äº‹ä»¶æ—¶é—´è½´ï¼ˆTimelineæ ·å¼ï¼‰
${data.events_timeline && data.events_timeline.length > 0 ? `
<div class="section" id="timeline">
    <h2 class="section-title">
        <span class="section-icon">ğŸ“…</span>
        äº‹ä»¶æ—¶é—´è½´ (${data.events_timeline.length})
    </h2>
    <div class="timeline">
        ${data.events_timeline.map(event => `
        <div class="timeline-item">
            <div class="timeline-date">${event.date}</div>
            <div class="timeline-title">${event.title}</div>
            ${event.type ? `<div class="timeline-type">${event.type}</div>` : ''}
        </div>
        `).join('')}
    </div>
</div>
` : ''}

// âœ… æ³•å¾‹äº‹ä»¶ï¼ˆTableæ ·å¼ï¼‰
${data.legal_events && data.legal_events.length > 0 ? `
<div class="section" id="legal-events">
    <h2 class="section-title">
        <span class="section-icon">âš–ï¸</span>
        æ³•å¾‹äº‹ä»¶ (${data.legal_events.length})
    </h2>
    <table class="data-table">
        <thead>
            <tr>
                <th>æ—¥æœŸ</th>
                <th>ä»£ç </th>
                <th>æè¿°</th>
            </tr>
        </thead>
        <tbody>
            ${data.legal_events.map(event => `
            <tr>
                <td>${event.date}</td>
                <td>${event.code || '-'}</td>
                <td>${event.description || event.title || '-'}</td>
            </tr>
            `).join('')}
        </tbody>
    </table>
</div>
` : ''}
```

#### 2.4 å·¦ä¾§å¯¼èˆªï¼ˆjs/patentDetailNewTab.jsï¼‰

```javascript
<a href="#timeline" class="side-nav-item">ğŸ“… äº‹ä»¶æ—¶é—´è½´</a>
<a href="#legal-events" class="side-nav-item">âš–ï¸ æ³•å¾‹äº‹ä»¶</a>  // âœ… æ–°å¢
```

## ğŸ“Š å­—æ®µå¯¹åº”å…³ç³»

| å‰ç«¯ Checkbox ID | getSelectedFields() | åç«¯å­—æ®µ | æ˜¾ç¤ºé€»è¾‘ | çŠ¶æ€ |
|-----------------|---------------------|---------|---------|------|
| field_events_timeline | events_timeline | events_timeline | #timeline | âœ… æ–°å¢ |
| field_legal_events | legal_events | legal_events | #legal-events | âœ… ä¿®æ”¹ |

## ğŸ¨ æ˜¾ç¤ºæ•ˆæœå¯¹æ¯”

### äº‹ä»¶æ—¶é—´è½´ï¼ˆTimelineæ ·å¼ï¼‰
```
ğŸ“… äº‹ä»¶æ—¶é—´è½´ (7)

â— 2018-07-13
  Application filed by Stanley Black and Decker Inc
  (filed)

â— 2021-09-02
  Publication of US20210268630A1
  (publication)

â— 2025-08-19
  Application granted
  (granted)
```

### æ³•å¾‹äº‹ä»¶ï¼ˆTableæ ·å¼ï¼‰
```
âš–ï¸ æ³•å¾‹äº‹ä»¶ (9)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ—¥æœŸ       â”‚ ä»£ç  â”‚ æè¿°                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2021-01-13 â”‚ FEPP â”‚ Fee payment procedure                â”‚
â”‚ 2021-08-23 â”‚ STPP â”‚ Information on status: patent app... â”‚
â”‚ 2024-12-10 â”‚ AS   â”‚ Assignment                           â”‚
â”‚ 2025-08-06 â”‚ STCF â”‚ Information on status: patent grant  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ ä¿®æ”¹æ–‡ä»¶æ¸…å•

### åç«¯æ–‡ä»¶ï¼š
1. âœ… `backend/scraper/simple_scraper.py`
   - æ·»åŠ  `events_timeline` å­—æ®µ
   - åˆ†ç¦»æå–é€»è¾‘
   - æ›´æ–°æ—¥å¿—è¾“å‡º

2. âœ… `backend/routes/patent.py`
   - æ›´æ–°ç‰ˆæœ¬ä¿¡æ¯

### å‰ç«¯æ–‡ä»¶ï¼š
1. âœ… `frontend/index.html`
   - æ·»åŠ  `field_events_timeline` checkbox
   - ä¿®æ”¹ `field_legal_events` æ ‡ç­¾

2. âœ… `js/main.js`
   - æ›´æ–° `getSelectedFields()` å‡½æ•°
   - æ·»åŠ  `selected_fields` å‚æ•°ä¼ é€’ï¼ˆä¹‹å‰å·²ä¿®å¤ï¼‰

3. âœ… `js/patentDetailNewTab.js`
   - åˆ†åˆ«æ˜¾ç¤º `events_timeline` å’Œ `legal_events`
   - æ·»åŠ å·¦ä¾§å¯¼èˆªé“¾æ¥

4. âœ… `frontend/css/components/field-selector.css`
   - æ”¹ä¸ºæ·¡ç»¿è‰²ç³»ï¼ˆä¹‹å‰å·²ä¿®å¤ï¼‰

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•æ­¥éª¤ï¼š

1. **æ‰“å¼€åŠŸèƒ½å…­**
2. **å±•å¼€å­—æ®µé€‰æ‹©å™¨**
   - âœ… ç¡®è®¤æœ‰ä¸¤ä¸ªç‹¬ç«‹é€‰é¡¹ï¼š"äº‹ä»¶æ—¶é—´è½´" å’Œ "æ³•å¾‹äº‹ä»¶"
   - âœ… ä¸¤ä¸ªéƒ½é»˜è®¤é€‰ä¸­
3. **è¾“å…¥ä¸“åˆ©å·**ï¼šUS12390907B2
4. **ç‚¹å‡»"æ‰¹é‡æŸ¥è¯¢ä¸“åˆ©"**
5. **æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—**ï¼š
   ```
   ğŸ“‹ ç”¨æˆ·é€‰æ‹©çš„å­—æ®µ: {events_timeline: true, legal_events: true, ...}
   ```
6. **æ‰“å¼€è¯¦æƒ…**
7. **éªŒè¯æ˜¾ç¤º**ï¼š
   - âœ… æ˜¾ç¤º"äº‹ä»¶æ—¶é—´è½´"éƒ¨åˆ†ï¼ˆTimelineæ ·å¼ï¼‰
   - âœ… æ˜¾ç¤º"æ³•å¾‹äº‹ä»¶"éƒ¨åˆ†ï¼ˆTableæ ·å¼ï¼‰
   - âœ… å·¦ä¾§å¯¼èˆªæœ‰ä¸¤ä¸ªç‹¬ç«‹é“¾æ¥

### æµ‹è¯•ç”¨ä¾‹ï¼š

#### ç”¨ä¾‹1ï¼šä¸¤ä¸ªéƒ½é€‰ä¸­
- å‹¾é€‰ï¼šâœ… äº‹ä»¶æ—¶é—´è½´ + âœ… æ³•å¾‹äº‹ä»¶
- é¢„æœŸï¼šä¸¤ä¸ªéƒ¨åˆ†éƒ½æ˜¾ç¤º

#### ç”¨ä¾‹2ï¼šåªé€‰äº‹ä»¶æ—¶é—´è½´
- å‹¾é€‰ï¼šâœ… äº‹ä»¶æ—¶é—´è½´ + â˜ æ³•å¾‹äº‹ä»¶
- é¢„æœŸï¼šåªæ˜¾ç¤ºäº‹ä»¶æ—¶é—´è½´

#### ç”¨ä¾‹3ï¼šåªé€‰æ³•å¾‹äº‹ä»¶
- å‹¾é€‰ï¼šâ˜ äº‹ä»¶æ—¶é—´è½´ + âœ… æ³•å¾‹äº‹ä»¶
- é¢„æœŸï¼šåªæ˜¾ç¤ºæ³•å¾‹äº‹ä»¶

#### ç”¨ä¾‹4ï¼šä¸¤ä¸ªéƒ½ä¸é€‰
- å‹¾é€‰ï¼šâ˜ äº‹ä»¶æ—¶é—´è½´ + â˜ æ³•å¾‹äº‹ä»¶
- é¢„æœŸï¼šä¸¤ä¸ªéƒ¨åˆ†éƒ½ä¸æ˜¾ç¤º

## ğŸš€ éƒ¨ç½²

### Gitæäº¤ï¼š
```bash
git add backend/scraper/simple_scraper.py backend/routes/patent.py frontend/index.html js/main.js js/patentDetailNewTab.js frontend/css/components/field-selector.css
git commit -m "åŠŸèƒ½å…­ï¼šåˆ†ç¦»äº‹ä»¶æ—¶é—´è½´å’Œæ³•å¾‹äº‹ä»¶ + å­—æ®µé€‰æ‹©å™¨æ·¡ç»¿è‰²ç³»"
git push origin main
```

## ğŸ“ æ€»ç»“

### ä¿®å¤å†…å®¹ï¼š
1. âœ… **åˆ†ç¦»å­—æ®µ**ï¼šå°† `legal_events` æ‹†åˆ†ä¸º `events_timeline` å’Œ `legal_events` ä¸¤ä¸ªç‹¬ç«‹å­—æ®µ
2. âœ… **åç«¯çˆ¬è™«**ï¼šåˆ†åˆ«æå–ä¸¤ç§ä¸åŒçš„æ•°æ®
3. âœ… **å‰ç«¯é€‰æ‹©å™¨**ï¼šæ·»åŠ ä¸¤ä¸ªç‹¬ç«‹çš„checkbox
4. âœ… **å‰ç«¯æ˜¾ç¤º**ï¼šåˆ†åˆ«æ˜¾ç¤ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œä½¿ç”¨ä¸åŒçš„æ ·å¼
5. âœ… **å­—æ®µä¼ é€’**ï¼šä¿®å¤ `selected_fields` å‚æ•°ä¼ é€’é—®é¢˜
6. âœ… **é¢œè‰²ç³»ç»Ÿ**ï¼šå­—æ®µé€‰æ‹©å™¨æ”¹ä¸ºæ·¡ç»¿è‰²ç³»

### ç”¨æˆ·ä»·å€¼ï¼š
- âœ… æ•°æ®æ›´å‡†ç¡®ï¼šåŒºåˆ†å…³é”®äº‹ä»¶å’Œæ³•å¾‹çŠ¶æ€
- âœ… æ˜¾ç¤ºæ›´æ¸…æ™°ï¼šä¸åŒç±»å‹çš„æ•°æ®ç”¨ä¸åŒæ ·å¼å±•ç¤º
- âœ… é€‰æ‹©æ›´çµæ´»ï¼šç”¨æˆ·å¯ä»¥ç‹¬ç«‹é€‰æ‹©éœ€è¦çš„å­—æ®µ
- âœ… è§†è§‰æ›´ç»Ÿä¸€ï¼šæ·¡ç»¿è‰²ç³»ä¸è¯¦æƒ…é¡µä¸€è‡´

---

**ä¿®å¤å®Œæˆæ—¶é—´**ï¼š2026-02-05
**ä¿®å¤äººå‘˜**ï¼šKiro AI Assistant
**çŠ¶æ€**ï¼šâœ… å·²å®Œæˆï¼Œå¾…æµ‹è¯•
**ä¸‹ä¸€æ­¥**ï¼šæµ‹è¯•éªŒè¯åæ¨é€åˆ°GitHub
