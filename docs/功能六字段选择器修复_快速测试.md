# 功能六字段选择器修复 - 快速测试指南

## 🎯 测试目标

1. ✅ 验证法律事件正确显示
2. ✅ 验证字段选择器为淡绿色系
3. ✅ 验证字段选择功能正常工作

## 📋 测试步骤

### 步骤1：检查字段选择器颜色

1. 打开应用，切换到**功能六：批量专利解读**
2. 点击"字段选择器"展开面板
3. **检查点**：
   - ✅ 容器边框是淡绿色（不是灰色）
   - ✅ 标题和图标是绿色（不是蓝色）
   - ✅ 字段选项背景是淡绿色（不是灰色）
   - ✅ 选中的字段是深绿色背景（不是蓝色）
   - ✅ 悬停效果是绿色（不是蓝色）

### 步骤2：测试法律事件显示

1. 在字段选择器中，确认**"事件时间轴"**选项已勾选
2. 在专利号输入框输入：`US10000000B2`
3. 点击**"批量查询专利"**按钮
4. **打开浏览器控制台**（F12），查看日志：
   ```
   📋 用户选择的字段: {legal_events: true, ...}
   🚀 开始查询专利，参数: {selected_fields: {...}}
   ```
5. 等待查询完成
6. 点击专利号条带，打开详情（弹窗或新标签页）
7. **检查点**：
   - ✅ 能看到"事件时间轴"部分
   - ✅ 显示法律事件列表（日期、标题、类型）
   - ✅ 时间轴样式正确（绿色圆点、连线）

### 步骤3：测试字段选择功能

1. 回到功能六主页
2. 展开字段选择器
3. **取消勾选**"事件时间轴"
4. 输入专利号：`US10000000B2`
5. 点击"批量查询专利"
6. 打开详情
7. **检查点**：
   - ✅ 不显示"事件时间轴"部分
   - ✅ 其他选中的字段正常显示

### 步骤4：测试其他字段

1. 依次测试以下字段的显示：
   - ✅ CPC分类
   - ✅ 技术领域
   - ✅ 引用专利
   - ✅ 被引用专利
   - ✅ 同族信息
   - ✅ 说明书
   - ✅ 附图

## 🐛 常见问题排查

### 问题1：法律事件仍然不显示

**排查步骤**：
1. 打开控制台，查看是否有 `selected_fields` 参数
2. 检查 `legal_events` 是否为 `true`
3. 查看网络请求，确认参数已发送
4. 检查后端日志，确认收到参数

**解决方案**：
- 清除浏览器缓存
- 强制刷新页面（Ctrl+Shift+R）
- 检查 `js/main.js` 是否正确加载

### 问题2：字段选择器颜色不对

**排查步骤**：
1. 检查 `field-selector.css` 是否正确加载
2. 查看浏览器开发者工具的 Styles 面板
3. 确认没有其他CSS覆盖

**解决方案**：
- 清除浏览器缓存
- 检查CSS文件路径
- 确认CSS文件版本正确

### 问题3：字段选择不生效

**排查步骤**：
1. 检查 `getSelectedFields()` 函数是否正确
2. 查看控制台是否有JavaScript错误
3. 确认checkbox的ID正确

**解决方案**：
- 检查 `js/main.js` 是否有语法错误
- 确认所有checkbox的ID与代码一致

## ✅ 测试通过标准

- ✅ 字段选择器为淡绿色系
- ✅ 法律事件正确显示
- ✅ 字段选择功能正常工作
- ✅ 控制台无错误
- ✅ 所有选中字段都正确显示

## 📝 测试报告模板

```
测试日期：____________________
测试人员：____________________

测试结果：
□ 通过  □ 失败

详细结果：
1. 字段选择器颜色：□ 通过  □ 失败
2. 法律事件显示：  □ 通过  □ 失败
3. 字段选择功能：  □ 通过  □ 失败

问题记录：
_________________________________
_________________________________
_________________________________

备注：
_________________________________
_________________________________
```

## 🚀 测试通过后的操作

1. **提交代码到Git**
   ```bash
   git add js/main.js frontend/css/components/field-selector.css
   git commit -m "功能六：修复法律事件显示 + 字段选择器淡绿色系"
   git push origin main
   ```

2. **部署到生产环境**
   - 按照部署流程操作
   - 在生产环境再次验证

3. **通知用户**
   - 法律事件显示问题已修复
   - 字段选择器改为淡绿色系

---

**测试指南创建时间**：2026-02-05
**预计测试时间**：5-10分钟
