# é…ç½®æ–‡ä»¶åˆ†æç»“æœ âœ…

## æœ¬åœ°é…ç½®æ–‡ä»¶å†…å®¹

```python
# Gunicorné…ç½®æ–‡ä»¶
import multiprocessing

# ç»‘å®šåœ°å€å’Œç«¯å£
bind = "0.0.0.0:5000"  # âœ… æœåŠ¡å™¨é…ç½®

# Workerè¿›ç¨‹æ•°é‡
workers = multiprocessing.cpu_count() * 2 + 1

# Workerç±»å‹
worker_class = "sync"

# æ¯ä¸ªworkerçš„çº¿ç¨‹æ•°
threads = 2

# è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
timeout = 120

# å·¥ä½œç›®å½•
chdir = "/home/appuser/patent-app"  # âœ… æœåŠ¡å™¨è·¯å¾„

# å…¶ä»–é…ç½®...
```

---

## åˆ†æç»“è®º ğŸ¯

### âœ… é…ç½®å®Œå…¨æ­£ç¡®ï¼

æœ¬åœ°çš„ `gunicorn_config.py` **å°±æ˜¯æœåŠ¡å™¨é…ç½®**ï¼š

1. **bind = "0.0.0.0:5000"**
   - âœ… ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£
   - âœ… å…è®¸å¤–éƒ¨è®¿é—®
   - âœ… è¿™æ˜¯æœåŠ¡å™¨éœ€è¦çš„é…ç½®

2. **chdir = "/home/appuser/patent-app"**
   - âœ… æœåŠ¡å™¨çš„é¡¹ç›®è·¯å¾„
   - âœ… ä¸æ˜¯æœ¬åœ°è·¯å¾„

3. **å®Œæ•´çš„ç”Ÿäº§ç¯å¢ƒé…ç½®**
   - âœ… Workeræ•°é‡è‡ªåŠ¨è®¡ç®—
   - âœ… è¶…æ—¶æ—¶é—´120ç§’
   - âœ… æ—¥å¿—é…ç½®å®Œæ•´
   - âœ… è¿›ç¨‹åç§°æ­£ç¡®

---

## ä¹‹å‰çš„è¯¯è§£ âŒ

æˆ‘ä¹‹å‰ä»¥ä¸ºï¼š
- æœ¬åœ°é…ç½®ï¼š`127.0.0.1:5000`ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
- æœåŠ¡å™¨é…ç½®ï¼š`0.0.0.0:5000`ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

**å®é™…æƒ…å†µ**ï¼š
- ä½ çš„æœ¬åœ°é…ç½®å·²ç»æ˜¯æœåŠ¡å™¨é…ç½®äº†
- ä¸éœ€è¦åŒºåˆ†æœ¬åœ°å’ŒæœåŠ¡å™¨ç‰ˆæœ¬
- å¯ä»¥ç›´æ¥æ¨é€å’Œæ‹‰å–

---

## æ–°çš„æ›´æ–°æ–¹æ¡ˆ âœ…

### æ–¹æ³•1ï¼šç›´æ¥åˆ é™¤å¹¶æ‹‰å–ï¼ˆæ¨èï¼‰â­

```bash
ssh root@43.99.101.195 "cd /home/appuser/patent-app && rm -f gunicorn_config.py && git pull origin main && chown -R appuser:appuser /home/appuser/patent-app && systemctl restart patent-app"
```

**è¯´æ˜**ï¼š
- åˆ é™¤æœåŠ¡å™¨ä¸Šçš„æœªè·Ÿè¸ªæ–‡ä»¶
- æ‹‰å–GitHubçš„é…ç½®ï¼ˆå’ŒæœåŠ¡å™¨ä¸€æ ·ï¼‰
- ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜

### æ–¹æ³•2ï¼šå¼ºåˆ¶è¦†ç›–

```bash
ssh root@43.99.101.195 "cd /home/appuser/patent-app && git checkout -f && git pull origin main && chown -R appuser:appuser /home/appuser/patent-app && systemctl restart patent-app"
```

### æ–¹æ³•3ï¼šä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬

åŒå‡»è¿è¡Œï¼š
```
ç›´æ¥æ›´æ–°-é…ç½®æ­£ç¡®.bat
```

---

## ä¸ºä»€ä¹ˆä¼šæœ‰å†²çªï¼Ÿ ğŸ¤”

æœåŠ¡å™¨ä¸Šçš„ `gunicorn_config.py` å¯èƒ½æ˜¯ï¼š
1. æ‰‹åŠ¨åˆ›å»ºçš„
2. ä¹‹å‰éƒ¨ç½²æ—¶åˆ›å»ºçš„
3. ä¸åœ¨Gitè·Ÿè¸ªä¸­

ä½†å†…å®¹åº”è¯¥å’ŒGitHubä¸Šçš„ä¸€æ ·ï¼Œæ‰€ä»¥å¯ä»¥å®‰å…¨è¦†ç›–ã€‚

---

## éªŒè¯æ­¥éª¤ âœ…

æ›´æ–°åæ£€æŸ¥ï¼š

### 1. æœåŠ¡çŠ¶æ€
```bash
ssh root@43.99.101.195 "systemctl status patent-app | grep Active"
```
åº”è¯¥æ˜¾ç¤ºï¼š`Active: active (running)`

### 2. ç«¯å£ç›‘å¬
```bash
ssh root@43.99.101.195 "netstat -tlnp | grep 5000"
```
åº”è¯¥æ˜¾ç¤ºï¼š`0.0.0.0:5000`

### 3. é…ç½®å†…å®¹
```bash
ssh root@43.99.101.195 "cat /home/appuser/patent-app/gunicorn_config.py | grep bind"
```
åº”è¯¥æ˜¾ç¤ºï¼š`bind = "0.0.0.0:5000"`

### 4. ç½‘ç«™è®¿é—®
æµè§ˆå™¨è®¿é—®ï¼šhttp://43.99.101.195

---

## ä¸€é”®å‘½ä»¤ï¼ˆå¤åˆ¶ç²˜è´´ï¼‰ğŸ“‹

```bash
ssh root@43.99.101.195 "cd /home/appuser/patent-app && rm -f gunicorn_config.py && git pull origin main && chown -R appuser:appuser /home/appuser/patent-app && systemctl restart patent-app"
```

---

## æ€»ç»“ ğŸ“

1. âœ… æœ¬åœ°é…ç½®å°±æ˜¯æœåŠ¡å™¨é…ç½®
2. âœ… å¯ä»¥å®‰å…¨è¦†ç›–æœåŠ¡å™¨æ–‡ä»¶
3. âœ… ä¸éœ€è¦å¤‡ä»½ï¼ˆå†…å®¹ä¸€æ ·ï¼‰
4. âœ… ç›´æ¥åˆ é™¤å¹¶æ‹‰å–å³å¯

**ä¸‹ä¸€æ­¥**ï¼šå¤åˆ¶ä¸Šé¢çš„å‘½ä»¤ï¼Œæ‰§è¡Œæ›´æ–°ï¼

---

**åˆ†ææ—¶é—´**ï¼š2026-01-31  
**ç»“è®º**ï¼šé…ç½®æ­£ç¡®ï¼Œå¯ä»¥ç›´æ¥æ›´æ–°  
**æ¨èæ–¹æ¡ˆ**ï¼šåˆ é™¤å¹¶æ‹‰å–  
**çŠ¶æ€**ï¼šâœ… å·²ç¡®è®¤å®‰å…¨
