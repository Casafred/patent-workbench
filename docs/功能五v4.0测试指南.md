# 功能五 v4.0 测试指南

## 快速测试步骤

### 1. 基础功能测试（5分钟）

#### 测试动态添加/删除
1. 打开应用，切换到"功能五：权利要求对比"
2. 默认显示2个输入框
3. 点击"添加"按钮，观察：
   - ✅ 新增第3个输入框
   - ✅ 显示"当前：3个"
   - ✅ 新框显示"#3 版本C"和删除按钮
4. 继续添加到10个
   - ✅ 添加按钮变为禁用状态
5. 点击任意删除按钮
   - ✅ 对应输入框被删除
   - ✅ 序号和标签自动重新分配
6. 删除到只剩2个
   - ✅ 删除按钮消失

#### 测试即时对话输入框
1. 切换到"功能一：即时对话"
2. 拖动输入框右下角调整大小
   - ✅ 只能向下扩展
   - ✅ 不会向上扩展

### 2. 对比分析测试（10分钟）

#### 准备测试数据
使用以下简化的权利要求文本：

**版本A（中文）：**
```
1. 一种智能手机，其特征在于，包括：
处理器；
显示屏；
摄像头模块。
```
序号：`1`

**版本B（中文）：**
```
1. 一种智能手机，其特征在于，包括：
处理器；
显示屏；
摄像头模块；
指纹识别模块。
```
序号：`1`

**版本C（英文）：**
```
1. A smartphone comprising:
a processor;
a display;
a camera module;
a fingerprint sensor;
a wireless charging module.
```
序号：`1`

#### 执行测试
1. 添加3个输入框
2. 分别粘贴上述文本和序号
3. 选择模型：GLM-4.7-Flash（快速）
4. 点击"开始全部对比分析"
5. 观察处理流程：
   - ✅ 提取权利要求文本
   - ✅ 检测语言（中文、中文、英文）
   - ✅ 翻译英文文本
   - ✅ 执行对比分析
6. 查看结果：
   - ✅ 统计面板显示（主题绿色背景+白线条）
   - ✅ 卡片视图显示3个对比组合（A-B, A-C, B-C）

### 3. 视图切换测试（3分钟）

1. 点击"卡片视图"按钮
   - ✅ 显示详细对比卡片
2. 点击"并排对比"按钮
   - ✅ 显示3列并排文本
   - ✅ 同步滚动功能正常
3. 点击"矩阵视图"按钮
   - ✅ 显示3x3相似度矩阵
   - ✅ 对角线显示"-"
   - ✅ 其他单元格显示百分比
4. 悬停在矩阵单元格上
   - ✅ 显示"点击查看详情"提示
5. 点击任意单元格（如"版本A vs 版本B"）
   - ✅ 自动切换到卡片视图
   - ✅ 滚动到对应卡片
   - ✅ 卡片高亮2秒

### 4. 耦合分析测试（8分钟）

#### 测试2个权利要求耦合
1. 在耦合对比区域，勾选"版本A"和"版本B"
2. 观察：
   - ✅ "开始耦合分析"按钮变为可用
3. 点击"开始耦合分析"
4. 等待分析完成，查看结果：
   - ✅ 显示耦合度评分
   - ✅ 列出共有特征（处理器、显示屏、摄像头）
   - ✅ 列出独有特征（B有指纹识别）
   - ✅ 显示两两关系分析
   - ✅ 显示耦合总结

#### 测试3个权利要求耦合
1. 勾选"版本A"、"版本B"、"版本C"
2. 点击"开始耦合分析"
3. 查看结果：
   - ✅ 显示3个权利要求的耦合关系
   - ✅ 共有特征更精确
   - ✅ 每个版本的独有特征
   - ✅ 3个两两关系分析（A-B, A-C, B-C）

### 5. 导出报告测试（3分钟）

1. 完成对比分析后，点击"导出报告"按钮
2. 观察：
   - ✅ 自动下载Markdown文件
   - ✅ 文件名格式：`权利要求对比报告_时间戳.md`
3. 打开下载的文件，检查内容：
   - ✅ 包含对比概况
   - ✅ 包含所有权利要求原文和译文
   - ✅ 包含详细对比分析
   - ✅ 包含相似度统计
   - ✅ 包含整体总结
   - ✅ Markdown格式正确

### 6. 边界条件测试（5分钟）

#### 最少数量测试
1. 删除到只剩2个输入框
   - ✅ 删除按钮消失
   - ✅ 仍可正常分析

#### 最多数量测试
1. 添加到10个输入框
   - ✅ 添加按钮禁用
   - ✅ 显示"当前：10个"
2. 填写10个不同的权利要求
3. 执行全部对比分析
   - ✅ 生成45个对比组合（C(10,2) = 45）
   - ⚠️ 注意：可能需要较长时间

#### 耦合分析边界
1. 只勾选1个权利要求
   - ✅ 耦合分析按钮禁用
2. 勾选2个权利要求
   - ✅ 按钮可用
3. 勾选所有权利要求
   - ✅ 可以分析（但耗时较长）

### 7. 错误处理测试（3分钟）

1. 不填写文本，直接点击分析
   - ✅ 显示错误提示
2. 只填写文本，不填写序号
   - ✅ 显示错误提示
3. 填写无效的序号（如"abc"）
   - ✅ 提取失败，显示错误

## 性能测试

### 响应时间参考
- 2个权利要求对比：约5-10秒
- 3个权利要求对比：约10-15秒
- 4个权利要求对比：约15-20秒
- 10个权利要求对比：约60-90秒
- 耦合分析（3个）：约10-15秒

### 优化建议
- 对于大量权利要求，建议分批对比
- 使用GLM-4.7-Flash模型可提升速度
- 耦合分析建议不超过5个权利要求

## 常见问题

### Q1: 添加按钮无法点击？
A: 已达到10个上限，请先删除部分输入框。

### Q2: 耦合分析按钮禁用？
A: 至少需要勾选2个权利要求。

### Q3: 矩阵点击无反应？
A: 确保已完成对比分析，且点击的不是对角线单元格。

### Q4: 导出报告失败？
A: 检查浏览器是否允许下载，或尝试更换浏览器。

### Q5: 统计面板颜色不对？
A: 清除浏览器缓存，强制刷新页面（Ctrl+F5）。

## 测试检查清单

- [ ] 动态添加输入框（2-10个）
- [ ] 动态删除输入框
- [ ] 序号和标签自动更新
- [ ] 即时对话输入框向下扩展
- [ ] 统计面板主题绿色
- [ ] 卡片视图正常显示
- [ ] 并排视图同步滚动
- [ ] 矩阵视图点击跳转
- [ ] 耦合分析功能
- [ ] 导出Markdown报告
- [ ] 边界条件处理
- [ ] 错误提示正确

## 测试完成标准

✅ 所有基础功能正常  
✅ 所有交互响应正确  
✅ 所有边界条件处理得当  
✅ 性能在可接受范围内  
✅ 用户体验流畅

---

**测试版本**: v4.0  
**预计测试时间**: 30-40分钟  
**建议测试环境**: Chrome/Edge最新版
