# é˜¿é‡Œäº‘æœåŠ¡å™¨æ›´æ–°åŠŸèƒ½å…«æŒ‡å— ğŸš€

## æ›´æ–°å†…å®¹
åŠŸèƒ½å…«OCRæ ‡æ³¨ä¼˜åŒ–ï¼šé«˜æ¸…æ˜¾ç¤º + ç¼©æ”¾ + å¼¹çª—

## ğŸ“‹ æ›´æ–°æ­¥éª¤

### æ­¥éª¤1ï¼šSSHè¿æ¥åˆ°æœåŠ¡å™¨
```bash
# ä½¿ç”¨ä½ çš„SSHå·¥å…·è¿æ¥
ssh root@ä½ çš„æœåŠ¡å™¨IP

# æˆ–ä½¿ç”¨é˜¿é‡Œäº‘æ§åˆ¶å°çš„è¿œç¨‹è¿æ¥
```

### æ­¥éª¤2ï¼šè¿›å…¥é¡¹ç›®ç›®å½•
```bash
cd /www/wwwroot/patent-workbench
```

### æ­¥éª¤3ï¼šæŸ¥çœ‹å½“å‰çŠ¶æ€
```bash
# æŸ¥çœ‹å½“å‰åˆ†æ”¯
git branch

# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
git log --oneline -1

# æŸ¥çœ‹æ˜¯å¦æœ‰æœªæäº¤çš„ä¿®æ”¹
git status
```

### æ­¥éª¤4ï¼šå¤‡ä»½å½“å‰é…ç½®ï¼ˆé‡è¦ï¼ï¼‰
```bash
# å¤‡ä»½ gunicorn é…ç½®
cp gunicorn_config.py gunicorn_config.py.backup

# æŸ¥çœ‹å½“å‰é…ç½®
cat gunicorn_config.py | grep bind
# åº”è¯¥æ˜¾ç¤ºï¼šbind = "0.0.0.0:5000"
```

### æ­¥éª¤5ï¼šæ‹‰å–æœ€æ–°ä»£ç 
```bash
# æ‹‰å–ä»£ç 
git pull origin main

# å¦‚æœæç¤ºåˆ†æ”¯ä¸å¯¹ï¼Œå°è¯•
git pull origin master
```

### æ­¥éª¤6ï¼šéªŒè¯é…ç½®æ–‡ä»¶ï¼ˆå…³é”®ï¼ï¼‰
```bash
# æ£€æŸ¥ gunicorn_config.py æ˜¯å¦è¢«è¦†ç›–
cat gunicorn_config.py | grep bind

# åº”è¯¥æ˜¾ç¤ºï¼šbind = "0.0.0.0:5000"
# å¦‚æœæ˜¾ç¤º 127.0.0.1:5000ï¼Œè¯´æ˜è¢«è¦†ç›–äº†ï¼Œéœ€è¦æ¢å¤
```

### æ­¥éª¤7ï¼šå¦‚æœé…ç½®è¢«è¦†ç›–ï¼Œæ¢å¤é…ç½®
```bash
# æ–¹æ³•1ï¼šä»å¤‡ä»½æ¢å¤
cp gunicorn_config.py.backup gunicorn_config.py

# æ–¹æ³•2ï¼šæ‰‹åŠ¨ç¼–è¾‘
vi gunicorn_config.py
# æŒ‰ i è¿›å…¥ç¼–è¾‘æ¨¡å¼
# å°† bind = "127.0.0.1:5000" æ”¹ä¸º bind = "0.0.0.0:5000"
# æŒ‰ ESCï¼Œè¾“å…¥ :wq ä¿å­˜é€€å‡º

# æ–¹æ³•3ï¼šä½¿ç”¨ sed å‘½ä»¤
sed -i 's/127.0.0.1:5000/0.0.0.0:5000/g' gunicorn_config.py

# éªŒè¯ä¿®æ”¹
cat gunicorn_config.py | grep bind
```

### æ­¥éª¤8ï¼šæ£€æŸ¥æ›´æ–°çš„æ–‡ä»¶
```bash
# æŸ¥çœ‹æ›´æ–°äº†å“ªäº›æ–‡ä»¶
git log --oneline -1
git show --name-only

# åº”è¯¥çœ‹åˆ°ï¼š
# - frontend/js/drawingMarkerInteractive.js
# - frontend/index.html
# - test_interactive_marker.html
# - .gitignore
# - æ–‡æ¡£æ–‡ä»¶
```

### æ­¥éª¤9ï¼šé‡å¯æœåŠ¡
```bash
# é‡å¯ gunicorn æœåŠ¡
sudo systemctl restart gunicorn

# ç­‰å¾…å‡ ç§’
sleep 3

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status gunicorn
```

### æ­¥éª¤10ï¼šéªŒè¯æœåŠ¡æ­£å¸¸
```bash
# æŸ¥çœ‹æœåŠ¡æ˜¯å¦è¿è¡Œ
sudo systemctl status gunicorn | grep Active
# åº”è¯¥æ˜¾ç¤ºï¼šActive: active (running)

# æŸ¥çœ‹ç«¯å£æ˜¯å¦ç›‘å¬
netstat -tlnp | grep 5000
# åº”è¯¥æ˜¾ç¤ºï¼š0.0.0.0:5000

# æµ‹è¯•æœ¬åœ°è®¿é—®
curl -I http://localhost:5000
# åº”è¯¥è¿”å› HTTP/1.1 200 OK
```

### æ­¥éª¤11ï¼šæŸ¥çœ‹æ—¥å¿—ï¼ˆå¦‚æœ‰é—®é¢˜ï¼‰
```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
sudo journalctl -u gunicorn -f

# æŸ¥çœ‹æœ€è¿‘50è¡Œæ—¥å¿—
sudo journalctl -u gunicorn -n 50

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
sudo journalctl -u gunicorn -p err
```

### æ­¥éª¤12ï¼šæ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶æµ‹è¯•
```
1. åœ¨æµè§ˆå™¨ä¸­è®¿é—®ä½ çš„ç½‘ç«™
2. æŒ‰ Ctrl+Shift+Delete æ¸…é™¤ç¼“å­˜
3. åˆ·æ–°é¡µé¢ï¼ˆCtrl+F5 å¼ºåˆ¶åˆ·æ–°ï¼‰
4. è¿›å…¥åŠŸèƒ½å…«æµ‹è¯•æ–°åŠŸèƒ½
```

## âœ… æµ‹è¯•æ¸…å•

è®¿é—®ç½‘ç«™åï¼Œæµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š

### åŸºæœ¬åŠŸèƒ½
- [ ] ä¸Šä¼ ä¸“åˆ©é™„å›¾
- [ ] è¾“å…¥è¯´æ˜ä¹¦æ–‡æœ¬
- [ ] ç‚¹å‡»"å¼€å§‹æ ‡æ³¨"
- [ ] æŸ¥çœ‹æ ‡æ³¨ç»“æœ

### æ–°åŠŸèƒ½æµ‹è¯•
- [ ] å›¾ç‰‡æ˜¯å¦é«˜æ¸…ï¼ˆä¸æ¨¡ç³Šï¼‰
- [ ] é¼ æ ‡æ»šè½®ç¼©æ”¾æ˜¯å¦å·¥ä½œ
- [ ] +/- æŒ‰é’®ç¼©æ”¾æ˜¯å¦å·¥ä½œ
- [ ] ç¼©æ”¾æ¯”ä¾‹æ˜¾ç¤ºæ˜¯å¦æ­£ç¡®ï¼ˆ100%ï¼‰
- [ ] ç‚¹å‡»"æ”¾å¤§æŸ¥çœ‹"æŒ‰é’®
- [ ] å¼¹çª—æ˜¯å¦æ­£å¸¸æ‰“å¼€
- [ ] å¼¹çª—ä¸­ç¼©æ”¾æ˜¯å¦å·¥ä½œ
- [ ] æ ‡æ³¨æ¡†å­—ä½“æ˜¯å¦æ¸…æ™°
- [ ] æ‹–åŠ¨æ ‡æ³¨æ¡†æ˜¯å¦æµç•…
- [ ] åŒå‡»ç¼–è¾‘æ˜¯å¦æ­£å¸¸
- [ ] å¯¼å‡ºå›¾ç‰‡æ˜¯å¦æˆåŠŸ

## ğŸ”§ å¸¸è§é—®é¢˜å¤„ç†

### é—®é¢˜1ï¼šgit pull å¤±è´¥
```bash
# é”™è¯¯ï¼šYour local changes would be overwritten by merge

# è§£å†³æ–¹æ³•1ï¼šæš‚å­˜æœ¬åœ°ä¿®æ”¹
git stash
git pull
git stash pop

# è§£å†³æ–¹æ³•2ï¼šå¼ºåˆ¶è¦†ç›–ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
git fetch --all
git reset --hard origin/main
```

### é—®é¢˜2ï¼šæœåŠ¡é‡å¯å¤±è´¥
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
sudo journalctl -u gunicorn -n 50

# å¸¸è§åŸå› ï¼š
# 1. ç«¯å£è¢«å ç”¨
sudo lsof -i :5000
# å¦‚æœæœ‰è¿›ç¨‹å ç”¨ï¼Œkill æ‰
sudo kill -9 è¿›ç¨‹ID

# 2. Python ç¯å¢ƒé—®é¢˜
which python3
python3 --version

# 3. æƒé™é—®é¢˜
sudo chown -R www:www /www/wwwroot/patent-workbench
```

### é—®é¢˜3ï¼šç½‘ç«™æ— æ³•è®¿é—®
```bash
# æ£€æŸ¥ Nginx çŠ¶æ€
sudo systemctl status nginx

# é‡å¯ Nginx
sudo systemctl restart nginx

# æ£€æŸ¥ Nginx é…ç½®
sudo nginx -t

# æŸ¥çœ‹ Nginx æ—¥å¿—
sudo tail -f /var/log/nginx/error.log
```

### é—®é¢˜4ï¼šåŠŸèƒ½å…«ä¸æ˜¾ç¤ºæ–°åŠŸèƒ½
```bash
# åŸå› ï¼šæµè§ˆå™¨ç¼“å­˜
# è§£å†³ï¼š
# 1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼ˆCtrl+Shift+Deleteï¼‰
# 2. å¼ºåˆ¶åˆ·æ–°ï¼ˆCtrl+F5ï¼‰
# 3. ä½¿ç”¨éšç§æ¨¡å¼æµ‹è¯•

# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æ›´æ–°
ls -lh frontend/js/drawingMarkerInteractive.js
# æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹æ—¶é—´

# æŸ¥çœ‹æ–‡ä»¶å†…å®¹
head -20 frontend/js/drawingMarkerInteractive.js
# åº”è¯¥çœ‹åˆ° v2.0 çš„æ³¨é‡Š
```

### é—®é¢˜5ï¼šé…ç½®æ–‡ä»¶è¢«è¦†ç›–
```bash
# ç—‡çŠ¶ï¼šç½‘ç«™æ— æ³•ä»å¤–éƒ¨è®¿é—®

# æ£€æŸ¥é…ç½®
cat gunicorn_config.py | grep bind

# å¦‚æœæ˜¾ç¤º 127.0.0.1:5000ï¼Œä¿®å¤ï¼š
sed -i 's/127.0.0.1:5000/0.0.0.0:5000/g' gunicorn_config.py

# é‡å¯æœåŠ¡
sudo systemctl restart gunicorn
```

## ğŸ“Š æ›´æ–°éªŒè¯

### éªŒè¯1ï¼šæ–‡ä»¶ç‰ˆæœ¬
```bash
# æŸ¥çœ‹ JS æ–‡ä»¶å¤´éƒ¨æ³¨é‡Š
head -5 frontend/js/drawingMarkerInteractive.js
# åº”è¯¥æ˜¾ç¤ºï¼šäº¤äº’å¼ä¸“åˆ©é™„å›¾æ ‡æ³¨ç³»ç»Ÿ v2.0
```

### éªŒè¯2ï¼šGit æäº¤è®°å½•
```bash
# æŸ¥çœ‹æœ€æ–°æäº¤
git log --oneline -1
# åº”è¯¥æ˜¾ç¤ºï¼šåŠŸèƒ½å…«OCRæ ‡æ³¨ä¼˜åŒ–ï¼šé«˜æ¸…æ˜¾ç¤º+ç¼©æ”¾+å¼¹çª—
```

### éªŒè¯3ï¼šæœåŠ¡çŠ¶æ€
```bash
# ä¸€é”®æ£€æŸ¥è„šæœ¬
echo "=== æœåŠ¡çŠ¶æ€ ==="
sudo systemctl status gunicorn | grep Active

echo "=== ç«¯å£ç›‘å¬ ==="
netstat -tlnp | grep 5000

echo "=== é…ç½®æ£€æŸ¥ ==="
cat gunicorn_config.py | grep bind

echo "=== æœ€æ–°æäº¤ ==="
git log --oneline -1
```

## ğŸ¯ å¿«é€Ÿå‘½ä»¤åˆé›†

### å®Œæ•´æ›´æ–°æµç¨‹ï¼ˆå¤åˆ¶ç²˜è´´ï¼‰
```bash
# 1. è¿›å…¥ç›®å½•
cd /www/wwwroot/patent-workbench

# 2. å¤‡ä»½é…ç½®
cp gunicorn_config.py gunicorn_config.py.backup

# 3. æ‹‰å–ä»£ç 
git pull origin main

# 4. æ£€æŸ¥å¹¶ä¿®å¤é…ç½®
if grep -q "127.0.0.1:5000" gunicorn_config.py; then
    echo "é…ç½®è¢«è¦†ç›–ï¼Œæ­£åœ¨ä¿®å¤..."
    sed -i 's/127.0.0.1:5000/0.0.0.0:5000/g' gunicorn_config.py
    echo "é…ç½®å·²ä¿®å¤"
else
    echo "é…ç½®æ­£å¸¸"
fi

# 5. éªŒè¯é…ç½®
cat gunicorn_config.py | grep bind

# 6. é‡å¯æœåŠ¡
sudo systemctl restart gunicorn

# 7. æ£€æŸ¥çŠ¶æ€
sleep 3
sudo systemctl status gunicorn | grep Active
netstat -tlnp | grep 5000

echo "æ›´æ–°å®Œæˆï¼è¯·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜åæµ‹è¯•"
```

### å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬ï¼ˆå¦‚æœ‰é—®é¢˜ï¼‰
```bash
# æŸ¥çœ‹æäº¤å†å²
git log --oneline -5

# å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
git reset --hard HEAD^

# æˆ–å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬
git reset --hard æäº¤ID

# é‡å¯æœåŠ¡
sudo systemctl restart gunicorn
```

## ğŸ“ æ›´æ–°è®°å½•

æ›´æ–°åè¯·è®°å½•ï¼š
```
æ›´æ–°æ—¶é—´ï¼š____å¹´__æœˆ__æ—¥ __:__
æ›´æ–°å†…å®¹ï¼šåŠŸèƒ½å…«OCRæ ‡æ³¨ä¼˜åŒ–
æ›´æ–°äººå‘˜ï¼š________
æœåŠ¡çŠ¶æ€ï¼šâ–¡ æ­£å¸¸  â–¡ å¼‚å¸¸
æµ‹è¯•ç»“æœï¼šâ–¡ é€šè¿‡  â–¡ å¤±è´¥
å¤‡æ³¨ï¼š________________
```

## ğŸ†˜ ç´§æ€¥è”ç³»

å¦‚é‡åˆ°æ— æ³•è§£å†³çš„é—®é¢˜ï¼š
1. æŸ¥çœ‹æ—¥å¿—ï¼š`sudo journalctl -u gunicorn -n 100`
2. å›æ»šç‰ˆæœ¬ï¼š`git reset --hard HEAD^`
3. é‡å¯æœåŠ¡ï¼š`sudo systemctl restart gunicorn`
4. æ£€æŸ¥é…ç½®ï¼š`cat gunicorn_config.py | grep bind`

---

**æ›´æ–°æŒ‡å—ç‰ˆæœ¬**ï¼šv1.0  
**åˆ›å»ºæ—¶é—´**ï¼š2026-01-31  
**é€‚ç”¨æœåŠ¡å™¨**ï¼šé˜¿é‡Œäº‘ ECS
