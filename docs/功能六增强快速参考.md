# åŠŸèƒ½å…­å¢å¼º - å¿«é€Ÿå‚è€ƒ

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. è‡ªå®šä¹‰è§£è¯»æ¨¡æ¿
ç”¨æˆ·å¯ä»¥åˆ›å»ºè‡ªå·±çš„ä¸“åˆ©è§£è¯»æ¨¡æ¿ï¼Œè‡ªå®šä¹‰è§£è¯»å­—æ®µå’Œå†…å®¹ã€‚

### 2. ä¸“åˆ©é—®ä¸€é—®
é’ˆå¯¹å•ä¸ªä¸“åˆ©è¿›è¡Œè‡ªç”±æé—®ï¼Œæ”¯æŒå¤šè½®å¯¹è¯ã€‚

---

## ğŸ“¦ æ–‡ä»¶ç»“æ„

```
js/
â”œâ”€â”€ patentTemplate.js          # æ¨¡æ¿ç®¡ç†æ¨¡å—
â””â”€â”€ patentChat.js              # å¯¹è¯åŠŸèƒ½æ¨¡å—

frontend/css/components/
â”œâ”€â”€ patent-template.css        # æ¨¡æ¿ç®¡ç†æ ·å¼
â””â”€â”€ patent-chat.css            # å¯¹è¯åŠŸèƒ½æ ·å¼

backend/routes/
â””â”€â”€ patent.py                  # æ›´æ–°çš„APIè·¯ç”±

frontend/
â””â”€â”€ index.html                 # æ›´æ–°çš„ç•Œé¢

.kiro/specs/patent-batch-enhancement/
â”œâ”€â”€ requirements.md            # éœ€æ±‚æ–‡æ¡£
â”œâ”€â”€ design.md                  # è®¾è®¡æ–‡æ¡£
â””â”€â”€ tasks.md                   # ä»»åŠ¡æ¸…å•
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åˆ›å»ºè‡ªå®šä¹‰æ¨¡æ¿

```javascript
// 1. ç‚¹å‡»"ç®¡ç†æ¨¡æ¿"æŒ‰é’®
// 2. ç‚¹å‡»"æ–°å»ºæ¨¡æ¿"
// 3. è¾“å…¥æ¨¡æ¿ä¿¡æ¯
{
  name: "æˆ‘çš„æ¨¡æ¿",
  description: "æ¨¡æ¿æè¿°",
  fields: [
    { name: "å­—æ®µ1", description: "å­—æ®µ1æè¿°" },
    { name: "å­—æ®µ2", description: "å­—æ®µ2æè¿°" }
  ]
}
// 4. ç‚¹å‡»"ä¿å­˜æ¨¡æ¿"
```

### ä½¿ç”¨ä¸“åˆ©å¯¹è¯

```javascript
// 1. æŸ¥è¯¢ä¸“åˆ©
// 2. ç‚¹å‡»ä¸“åˆ©å¡ç‰‡çš„"é—®ä¸€é—®"æŒ‰é’®
// 3. è¾“å…¥é—®é¢˜
// 4. æŸ¥çœ‹AIå›å¤
// 5. ç»§ç»­æé—®ï¼ˆå¤šè½®å¯¹è¯ï¼‰
```

---

## ğŸ¨ é¢„è®¾æ¨¡æ¿

### 1. é»˜è®¤æ¨¡æ¿ï¼ˆ8å­—æ®µï¼‰
- æŠ€æœ¯é¢†åŸŸ
- åˆ›æ–°ç‚¹
- æŠ€æœ¯æ–¹æ¡ˆ
- åº”ç”¨åœºæ™¯
- å¸‚åœºä»·å€¼
- æŠ€æœ¯ä¼˜åŠ¿
- å±€é™æ€§
- è§£è¯»æ€»ç»“

### 2. æŠ€æœ¯åˆ†ææ¨¡æ¿ï¼ˆ6å­—æ®µï¼‰
- æŠ€æœ¯é¢†åŸŸ
- æŠ€æœ¯é—®é¢˜
- æŠ€æœ¯æ–¹æ¡ˆ
- å…³é”®æŠ€æœ¯
- æŠ€æœ¯æ•ˆæœ
- å®ç°éš¾åº¦

### 3. å•†ä¸šä»·å€¼æ¨¡æ¿ï¼ˆ6å­—æ®µï¼‰
- å¸‚åœºå®šä½
- åº”ç”¨åœºæ™¯
- å¸‚åœºéœ€æ±‚
- ç«äº‰ä¼˜åŠ¿
- å•†ä¸šåŒ–æ½œåŠ›
- å¸‚åœºé£é™©

### 4. æ³•å¾‹åˆ†ææ¨¡æ¿ï¼ˆ6å­—æ®µï¼‰
- ä¿æŠ¤èŒƒå›´
- ç‹¬ç«‹æƒåˆ©è¦æ±‚
- ä»å±æƒåˆ©è¦æ±‚
- ä¸“åˆ©å¼ºåº¦
- ä¾µæƒé£é™©
- æ³•å¾‹çŠ¶æ€

---

## ğŸ”§ APIæ¥å£

### 1. ä¸“åˆ©è§£è¯»ï¼ˆæ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿ï¼‰

```javascript
POST /patent/analyze

Request:
{
  "patent_data": { /* ä¸“åˆ©æ•°æ® */ },
  "template": {
    "fields": [
      { "id": "field1", "name": "å­—æ®µ1", "description": "æè¿°1" }
    ],
    "system_prompt": "è‡ªå®šä¹‰ç³»ç»Ÿæç¤ºè¯"
  },
  "user_prompt": "è‡ªå®šä¹‰ç”¨æˆ·æç¤ºè¯",
  "include_specification": true
}

Response:
{
  "choices": [{
    "message": {
      "content": "{\"field1\": \"å†…å®¹1\", ...}"
    }
  }]
}
```

### 2. ä¸“åˆ©å¯¹è¯

```javascript
POST /patent/chat

Request:
{
  "patent_number": "CN123456789A",
  "patent_data": { /* ä¸“åˆ©æ•°æ® */ },
  "messages": [
    { "role": "user", "content": "ç”¨æˆ·é—®é¢˜" }
  ]
}

Response:
{
  "choices": [{
    "message": {
      "role": "assistant",
      "content": "AIå›ç­”"
    }
  }]
}
```

---

## ğŸ’¾ æ•°æ®å­˜å‚¨

### æ¨¡æ¿å­˜å‚¨
```javascript
// localStorage key: 'patent_custom_templates'
[
  {
    id: "custom_1234567890",
    name: "æ¨¡æ¿åç§°",
    description: "æ¨¡æ¿æè¿°",
    isPreset: false,
    fields: [...],
    systemPrompt: "...",
    createdAt: "2026-01-26T00:00:00Z",
    updatedAt: "2026-01-26T00:00:00Z"
  }
]
```

### å¯¹è¯çŠ¶æ€
```javascript
// appState.patentBatch.patentChats
{
  "CN123456789A": {
    patentNumber: "CN123456789A",
    patentData: { /* ä¸“åˆ©æ•°æ® */ },
    messages: [
      { role: "user", content: "...", timestamp: "..." },
      { role: "assistant", content: "...", timestamp: "..." }
    ],
    isOpen: true
  }
}
```

---

## ğŸ¯ å…³é”®å‡½æ•°

### æ¨¡æ¿ç®¡ç†

```javascript
// åˆå§‹åŒ–æ¨¡æ¿ç®¡ç†
initPatentTemplate()

// åŠ è½½æ¨¡æ¿
loadTemplate(templateId)

// ä¿å­˜æ¨¡æ¿
saveCurrentTemplate()

// åˆ é™¤æ¨¡æ¿
deleteCurrentTemplate()

// å¯¼å‡ºæ¨¡æ¿
exportCurrentTemplate()

// å¯¼å…¥æ¨¡æ¿
importTemplate(event)

// æ„å»ºè§£è¯»æç¤ºè¯
buildAnalysisPrompt(template, patentData, includeSpecification)
```

### å¯¹è¯åŠŸèƒ½

```javascript
// åˆå§‹åŒ–å¯¹è¯åŠŸèƒ½
initPatentChat()

// æ‰“å¼€å¯¹è¯çª—å£
openPatentChat(patentNumber)

// å…³é—­å¯¹è¯çª—å£
closePatentChat()

// å‘é€æ¶ˆæ¯
sendPatentChatMessage()

// æ¸…ç©ºå¯¹è¯
clearPatentChat()

// å¯¼å‡ºå¯¹è¯
exportPatentChat()
```

---

## ğŸ¨ CSSç±»å

### æ¨¡æ¿ç®¡ç†
```css
.template-management-section  /* æ¨¡æ¿ç®¡ç†åŒºå®¹å™¨ */
.template-header              /* æ¨¡æ¿å¤´éƒ¨ */
#template_editor              /* æ¨¡æ¿ç¼–è¾‘å™¨ */
.template-info                /* æ¨¡æ¿ä¿¡æ¯ */
.fields-container             /* å­—æ®µå®¹å™¨ */
.field-config-item            /* å­—æ®µé…ç½®é¡¹ */
.template-actions             /* æ¨¡æ¿æ“ä½œæŒ‰é’®ç»„ */
```

### å¯¹è¯åŠŸèƒ½
```css
.ask-patent-btn               /* é—®ä¸€é—®æŒ‰é’® */
.patent-chat-modal            /* å¯¹è¯å¼¹çª— */
.chat-history                 /* å¯¹è¯å†å²åŒº */
.chat-message                 /* æ¶ˆæ¯å®¹å™¨ */
.user-message                 /* ç”¨æˆ·æ¶ˆæ¯ */
.assistant-message            /* AIæ¶ˆæ¯ */
.chat-input-area              /* è¾“å…¥åŒºåŸŸ */
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q: æ¨¡æ¿ä¿å­˜åæ‰¾ä¸åˆ°ï¼Ÿ
A: æ£€æŸ¥localStorageæ˜¯å¦è¢«æ¸…é™¤ï¼Œå»ºè®®å¯¼å‡ºé‡è¦æ¨¡æ¿å¤‡ä»½ã€‚

### Q: å¯¹è¯å†å²ä¸¢å¤±ï¼Ÿ
A: å¯¹è¯å†å²åœ¨ä¼šè¯æœŸé—´ä¿ç•™ï¼Œå…³é—­çª—å£ä¼šæ¸…ç©ºã€‚ä½¿ç”¨"å¯¼å‡ºå¯¹è¯"ä¿å­˜ã€‚

### Q: è§£è¯»ç»“æœæ ¼å¼ä¸å¯¹ï¼Ÿ
A: æ£€æŸ¥æ¨¡æ¿å­—æ®µIDæ˜¯å¦ä¸AIè¿”å›çš„JSONå­—æ®µåŒ¹é…ã€‚

### Q: Excelå¯¼å‡ºç¼ºå°‘å­—æ®µï¼Ÿ
A: ç¡®ä¿ä½¿ç”¨äº†æ­£ç¡®çš„æ¨¡æ¿ï¼ŒExcelä¼šè‡ªåŠ¨åŒ…å«å½“å‰æ¨¡æ¿çš„æ‰€æœ‰å­—æ®µã€‚

### Q: å¯¹è¯æ— å“åº”ï¼Ÿ
A: æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒAPI Keyé…ç½®ã€‚

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

- æ¨¡æ¿åŠ è½½ï¼š< 100ms
- å¯¹è¯å“åº”ï¼š2-5ç§’ï¼ˆå–å†³äºAI APIï¼‰
- Excelå¯¼å‡ºï¼š< 1ç§’ï¼ˆ50ä¸ªä¸“åˆ©ï¼‰
- æ¨¡æ¿å¯¼å…¥/å¯¼å‡ºï¼š< 100ms

---

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

1. æ¨¡æ¿å­˜å‚¨åœ¨localStorageï¼Œæ¸…é™¤æµè§ˆå™¨æ•°æ®ä¼šä¸¢å¤±
2. å¯¹è¯å†…å®¹ä¸ä¼šæŒä¹…åŒ–å­˜å‚¨
3. å¯¼å‡ºçš„æ–‡ä»¶åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œæ³¨æ„ä¿ç®¡
4. API Keyä¸è¦æ³„éœ²

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2026-01-26)
- âœ… æ–°å¢è‡ªå®šä¹‰è§£è¯»æ¨¡æ¿ç³»ç»Ÿ
- âœ… æ–°å¢ä¸“åˆ©é—®ä¸€é—®å¯¹è¯åŠŸèƒ½
- âœ… 4ä¸ªé¢„è®¾æ¨¡æ¿
- âœ… æ¨¡æ¿å¯¼å…¥/å¯¼å‡º
- âœ… å¤šè½®å¯¹è¯æ”¯æŒ
- âœ… å¯¹è¯å¯¼å‡ºåŠŸèƒ½
- âœ… å“åº”å¼è®¾è®¡
- âœ… å®Œæ•´æ–‡æ¡£

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [éœ€æ±‚æ–‡æ¡£](.kiro/specs/patent-batch-enhancement/requirements.md)
- [è®¾è®¡æ–‡æ¡£](.kiro/specs/patent-batch-enhancement/design.md)
- [ä»»åŠ¡æ¸…å•](.kiro/specs/patent-batch-enhancement/tasks.md)
- [å®ç°è¿›åº¦](åŠŸèƒ½å…­å¢å¼ºå®ç°è¿›åº¦.md)
- [å®Œæˆæ€»ç»“](åŠŸèƒ½å…­å¢å¼ºå®Œæˆæ€»ç»“.md)
- [æµ‹è¯•æŒ‡å—](åŠŸèƒ½å…­å¢å¼ºæµ‹è¯•æŒ‡å—.md)

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. æµ‹è¯•æŒ‡å—ä¸­çš„å¸¸è§é—®é¢˜
2. å®Œæˆæ€»ç»“ä¸­çš„æŠ€æœ¯ç»†èŠ‚
3. è®¾è®¡æ–‡æ¡£ä¸­çš„æ¶æ„è¯´æ˜

---

**æœ€åæ›´æ–°**: 2026-01-26
**ç‰ˆæœ¬**: 1.0.0
**çŠ¶æ€**: âœ… å·²å®Œæˆ
