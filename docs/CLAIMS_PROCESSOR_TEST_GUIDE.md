# 权利要求处理器测试指南

## ✅ 已完成的工作

1. **后端API集成** ✓
   - 文件上传API
   - 工作表和列信息获取
   - 权利要求处理API
   - 结果导出API

2. **前端界面集成** ✓
   - 添加到主页面功能七
   - 文件上传界面
   - 进度显示
   - 结果展示表格
   - 导出按钮

3. **样式美化** ✓
   - 统计卡片样式
   - 表格样式
   - Badge样式

## 🐛 已修复的问题

1. ✅ JavaScript元素不存在错误
2. ✅ datetime导入缺失
3. ✅ API响应数据格式适配

## 📝 测试步骤

### 方式1：通过Web界面测试（推荐）

1. **启动服务器**
   ```bash
   python app.py
   ```

2. **登录系统**
   - 访问：http://127.0.0.1:5001/login
   - 用户名：`test`
   - 密码：`test123`

3. **访问功能**
   - 登录后会跳转到主页面
   - 点击顶部导航栏的"功能七：权利要求处理"

4. **上传文件**
   - 点击"上传Excel文件"
   - 选择 `test_smartphone.xlsx`
   - 等待上传完成

5. **选择配置**
   - 选择工作表（通常是第一个）
   - 选择包含权利要求的列

6. **开始处理**
   - 点击"开始处理"按钮
   - 观察进度条

7. **查看结果**
   - 查看统计信息
   - 浏览权利要求详情表格
   - 点击"导出Excel"或"导出JSON"
   - 点击"查看报告"

### 方式2：通过命令行测试

```bash
# 运行演示脚本
python demo.py

# 或运行导出演示
python demo_export.py
```

### 方式3：通过pytest测试

```bash
# 运行所有测试
pytest -v

# 只运行权利要求处理相关测试
pytest tests/test_processing_service.py -v
pytest tests/test_excel_processor_properties.py -v
pytest tests/test_language_detector_properties.py -v
```

## 🔍 调试技巧

### 查看浏览器控制台

1. 按F12打开开发者工具
2. 切换到"Console"标签
3. 查看JavaScript日志和错误

### 查看服务器日志

服务器终端会显示所有请求和错误信息。

### 常见问题

**Q: 上传文件后没有反应？**
A: 检查浏览器控制台是否有错误，查看服务器终端日志。

**Q: 显示"Authentication required"？**
A: 需要先登录系统。

**Q: 文件上传失败？**
A: 确保文件是有效的Excel格式（.xlsx或.xls）。

**Q: 处理卡住不动？**
A: 刷新页面重试，或查看服务器日志。

## 📊 预期结果

使用 `test_smartphone.xlsx` 测试文件，应该得到：

- **处理单元格数**: 2
- **提取权利要求数**: 6
- **独立权利要求**: 2
- **从属权利要求**: 4
- **语言分布**: 中文3个，英文3个

## 🎯 下一步

如果测试成功：
1. ✅ 功能已完全集成
2. ✅ 可以开始使用真实数据
3. ✅ 可以根据需要调整界面

如果遇到问题：
1. 查看浏览器控制台错误
2. 查看服务器终端日志
3. 提供具体错误信息以便修复

## 💡 提示

- 第一次使用时，建议使用小文件测试
- 确保Excel文件格式正确
- 权利要求文本应该包含序号（1. 2. 3.等）
- 支持中英文混合文本

---

**测试愉快！** 🚀
