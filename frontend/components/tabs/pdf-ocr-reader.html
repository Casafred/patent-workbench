<!-- 功能九：PDF阅读与OCR解析 -->
<div id="pdf_ocr_reader-tab" class="tab-content">
    <div id="pdf-ocr-container" class="pdf-ocr-container">
        <!-- 左侧边栏：文件控制 -->
        <div class="pdf-ocr-sidebar">
            <!-- 文件上传 -->
            <div class="ocr-panel">
                <h4 class="panel-title">📄 文件上传</h4>
                <div id="pdf_upload_dropzone" class="upload-zone">
                    <input type="file" id="ocr-file-input" accept=".pdf,.png,.jpg,.jpeg,.bmp,.webp" style="display: none;">
                    <div class="upload-placeholder">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="17 8 12 3 7 8"></polyline>
                            <line x1="12" y1="3" x2="12" y2="15"></line>
                        </svg>
                        <p>点击或拖拽上传</p>
                        <span class="hint">PDF、PNG、JPG，≤10MB</span>
                    </div>
                </div>
                <div id="pdf_file_info" class="file-info" style="display: none;">
                    <span id="pdf_file_name"></span>
                    <button class="btn-small" id="pdf_remove_file_btn">移除</button>
                </div>
            </div>

            <!-- OCR控制 -->
            <div class="ocr-panel">
                <h4 class="panel-title">🔍 OCR解析</h4>
                <div class="control-group">
                    <label>解析范围</label>
                    <select id="ocr-parse-mode" class="form-select">
                        <option value="page">当前页面</option>
                        <option value="auto">全部页面</option>
                    </select>
                </div>
                <div class="checkbox-group">
                    <label><input type="checkbox" id="ocr-recognize-formula" checked> 识别公式</label>
                    <label><input type="checkbox" id="ocr-recognize-table" checked> 识别表格</label>
                </div>
                <button id="start-ocr-btn" class="btn-primary" disabled>
                    开始OCR解析
                </button>
                <div id="ocr-progress-container" class="progress-wrap" style="display: none;">
                    <div class="progress-bar">
                        <div id="ocr-progress-bar" class="progress-fill"></div>
                    </div>
                    <span id="ocr-progress-text">准备中...</span>
                </div>
            </div>

            <!-- 识别结果列表 -->
            <div class="ocr-panel results-panel">
                <h4 class="panel-title">📋 识别结果</h4>
                <div class="filter-bar">
                    <select id="ocr-block-filter" class="form-select">
                        <option value="all">全部类型</option>
                        <option value="text">文本</option>
                        <option value="table">表格</option>
                        <option value="formula">公式</option>
                        <option value="image">图片</option>
                    </select>
                </div>
                <div id="ocr-structured-content" class="results-list">
                    <div class="empty-tip">请先上传文件并解析</div>
                </div>
            </div>

            <!-- 导出 -->
            <div class="ocr-panel">
                <h4 class="panel-title">💾 导出</h4>
                <div class="export-btns">
                    <button id="ocr-export-json" class="btn-small" disabled>JSON</button>
                    <button id="ocr-export-markdown" class="btn-small" disabled>Markdown</button>
                    <button id="ocr-export-text" class="btn-small" disabled>TXT</button>
                </div>
            </div>
        </div>

        <!-- 中间主区域：PDF查看器 -->
        <div class="pdf-ocr-main">
            <!-- 工具栏 -->
            <div class="viewer-toolbar">
                <div class="toolbar-left">
                    <button id="viewer_prev_page" class="btn-icon" title="上一页">◀</button>
                    <span class="page-info">
                        <input type="number" id="viewer_page_input" value="1" min="1"> / <span id="viewer_total_pages">1</span>
                    </span>
                    <button id="viewer_next_page" class="btn-icon" title="下一页">▶</button>
                </div>
                <div class="toolbar-center">
                    <button id="viewer_zoom_out" class="btn-icon" title="缩小">−</button>
                    <select id="viewer_zoom_select">
                        <option value="0.5">50%</option>
                        <option value="0.75">75%</option>
                        <option value="1.0" selected>100%</option>
                        <option value="1.25">125%</option>
                        <option value="1.5">150%</option>
                        <option value="2.0">200%</option>
                    </select>
                    <button id="viewer_zoom_in" class="btn-icon" title="放大">+</button>
                </div>
                <div class="toolbar-right">
                    <button id="toggle-ocr-blocks" class="btn-toggle" title="显示/隐藏识别区块">
                        显示区块
                    </button>
                </div>
            </div>

            <!-- PDF渲染区 -->
            <div class="viewer-wrap">
                <div id="pdf-canvas" class="viewer-container">
                    <div class="empty-state">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                        </svg>
                        <p>请上传PDF或图片文件</p>
                        <p class="hint">上传后可进行OCR识别，支持划词选中</p>
                    </div>
                </div>
                <!-- OCR区块层 -->
                <div id="ocr-blocks-layer" class="blocks-layer" style="display: none;"></div>
                <!-- 划词选择层 -->
                <div id="ocr-selection-layer" class="selection-layer" style="display: none;"></div>
            </div>

            <!-- 底部信息栏 -->
            <div class="viewer-footer">
                <div class="footer-left">
                    <span id="ocr-status">就绪</span>
                </div>
                <div class="footer-right">
                    <span>文本: <b id="stat-text">0</b></span>
                    <span>表格: <b id="stat-table">0</b></span>
                    <span>公式: <b id="stat-formula">0</b></span>
                    <span>图片: <b id="stat-image">0</b></span>
                </div>
            </div>
        </div>

        <!-- 右侧边栏：内容预览 -->
        <div class="pdf-ocr-rightbar">
            <div class="ocr-panel content-panel">
                <h4 class="panel-title">📝 识别文本</h4>
                <div class="content-tabs">
                    <button class="tab-btn active" data-tab="original">原文</button>
                    <button class="tab-btn" data-tab="markdown">Markdown</button>
                </div>
                <div class="content-body">
                    <div id="tab_original" class="tab-content active">
                        <div id="ocr-original-content" class="text-content">请先进行OCR解析</div>
                    </div>
                    <div id="tab_markdown" class="tab-content">
                        <div id="ocr-markdown-content" class="text-content">请先进行OCR解析</div>
                    </div>
                </div>
            </div>

            <div class="ocr-panel">
                <h4 class="panel-title">ℹ️ 区块详情</h4>
                <div id="ocr-block-details" class="block-details">
                    <div class="empty-tip">点击左侧识别结果查看详情</div>
                </div>
            </div>
        </div>
    </div>
</div>
