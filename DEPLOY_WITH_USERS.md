# éƒ¨ç½²æ—¶é…ç½®ç”¨æˆ·è®¤è¯

## å¿«é€Ÿå¼€å§‹

### 1. æœ¬åœ°ç®¡ç†ç”¨æˆ·

ä½¿ç”¨ `ç”¨æˆ·ç®¡ç†.html` å¯è§†åŒ–ç•Œé¢ï¼š

```bash
# ç›´æ¥åœ¨æµè§ˆå™¨æ‰“å¼€
ç”¨æˆ·ç®¡ç†.html
```

æ·»åŠ ç”¨æˆ·å¹¶å¡«å†™å¤‡æ³¨ä¿¡æ¯ã€‚

### 2. å¯¼å‡ºä¸¤ä¸ªç‰ˆæœ¬

ç³»ç»Ÿä¼šç”Ÿæˆä¸¤ä¸ªç‰ˆæœ¬çš„æ–‡ä»¶ï¼š

#### ğŸ“¦ å®Œæ•´ç‰ˆï¼ˆusers_full.jsonï¼‰
- åŒ…å«ç”¨æˆ·åã€å¯†ç å“ˆå¸Œã€å¤‡æ³¨ã€æ³¨å†Œæ—¶é—´
- ç”¨äºæœ¬åœ°ç®¡ç†å’Œå¤‡ä»½
- å¯ä»¥é‡æ–°å¯¼å…¥åˆ°ç®¡ç†ç•Œé¢

#### ğŸš€ éƒ¨ç½²ç‰ˆï¼ˆusers.jsonï¼‰
- ä»…åŒ…å«ç”¨æˆ·åå’Œå¯†ç å“ˆå¸Œ
- ç”¨äº Render Secret Files ä¸Šä¼ 
- çº¯å‡€æ ¼å¼ï¼Œå…¼å®¹åç«¯

### 3. éƒ¨ç½²åˆ° Render

#### ä½¿ç”¨éƒ¨ç½²ç‰ˆï¼ˆæ¨èï¼‰

1. åœ¨ç®¡ç†ç•Œé¢ç‚¹å‡» **"ä¸‹è½½éƒ¨ç½²ç‰ˆ users.json"**
2. ç™»å½• [Render Dashboard](https://dashboard.render.com/)
3. é€‰æ‹©ä½ çš„æœåŠ¡
4. è¿›å…¥ **Environment** æ ‡ç­¾
5. æ»šåŠ¨åˆ° **Secret Files** éƒ¨åˆ†
6. ç‚¹å‡» **Add Secret File**
7. å¡«å†™ï¼š
   - **Filename**: `backend/user_management/users.json`
   - **Contents**: ç²˜è´´éƒ¨ç½²ç‰ˆ users.json çš„å†…å®¹
8. ç‚¹å‡» **Save Changes**

**éƒ¨ç½²ç‰ˆæ ¼å¼ç¤ºä¾‹**ï¼š
```json
{
    "alfred777": "pbkdf2:sha256:260000$...",
    "admin": "pbkdf2:sha256:260000$...",
    "demo": "pbkdf2:sha256:260000$..."
}
```

### 4. æœ¬åœ°ä¿å­˜å®Œæ•´ç‰ˆ

å°† **users_full.json** ä¿å­˜åˆ°å®‰å…¨ä½ç½®ï¼š
- ç”¨äºæœ¬åœ°ç®¡ç†
- åŒ…å«æ‰€æœ‰å¤‡æ³¨ä¿¡æ¯
- å¯ä»¥éšæ—¶é‡æ–°å¯¼å…¥

**å®Œæ•´ç‰ˆæ ¼å¼ç¤ºä¾‹**ï¼š
```json
{
    "users": {
        "alfred777": "pbkdf2:sha256:260000$...",
        "admin": "pbkdf2:sha256:260000$..."
    },
    "metadata": {
        "alfred777": {
            "createdAt": "2026/01/20 15:30:45",
            "note": "Alfred - åˆ›å§‹äºº - ç³»ç»Ÿç®¡ç†å‘˜"
        },
        "admin": {
            "createdAt": "2026/01/20 15:35:20",
            "note": "ç®¡ç†å‘˜è´¦å·"
        }
    },
    "version": "3.0",
    "exportedAt": "2026-01-20T07:30:45.123Z"
}
```

## å¯ç”¨è´¦å·åˆ—è¡¨

ä½¿ç”¨ `reset_user_passwords.py` è„šæœ¬ä¼šåˆ›å»ºä»¥ä¸‹æµ‹è¯•è´¦å·ï¼š

| ç”¨æˆ·å | å¯†ç  | ç”¨é€” |
|--------|------|------|
| alfred777 | alfred777 | ä¸»è´¦å· |
| fredmate001 | fredmate001 | æµ‹è¯•è´¦å·1 |
| fredmate002 | fredmate002 | æµ‹è¯•è´¦å·2 |
| test | test123 | æµ‹è¯•è´¦å· |
| test2026 | test2026 | 2026æµ‹è¯•è´¦å· |
| admin | admin123 | ç®¡ç†å‘˜è´¦å· |
| demo | demo123 | æ¼”ç¤ºè´¦å· |

âš ï¸ **é‡è¦**ï¼šç”Ÿäº§ç¯å¢ƒéƒ¨ç½²åï¼Œè¯·ç«‹å³ä¿®æ”¹è¿™äº›é»˜è®¤å¯†ç ï¼

## ä¸¤ä¸ªç‰ˆæœ¬çš„åŒºåˆ«

### ğŸ“¦ å®Œæ•´ç‰ˆï¼ˆusers_full.jsonï¼‰

**ç”¨é€”**ï¼šæœ¬åœ°ç®¡ç†å’Œå¤‡ä»½

**åŒ…å«å†…å®¹**ï¼š
- ç”¨æˆ·åå’Œå¯†ç å“ˆå¸Œ
- ä¸ªäººä¿¡æ¯å¤‡æ³¨
- æ³¨å†Œæ—¶é—´
- ç‰ˆæœ¬ä¿¡æ¯

**ä½¿ç”¨åœºæ™¯**ï¼š
- æœ¬åœ°å¯è§†åŒ–ç®¡ç†
- å¤‡ä»½ç”¨æˆ·ä¿¡æ¯
- é‡æ–°å¯¼å…¥åˆ°ç®¡ç†ç•Œé¢

### ğŸš€ éƒ¨ç½²ç‰ˆï¼ˆusers.jsonï¼‰

**ç”¨é€”**ï¼šRender éƒ¨ç½²

**åŒ…å«å†…å®¹**ï¼š
- ä»…ç”¨æˆ·åå’Œå¯†ç å“ˆå¸Œ

**ä½¿ç”¨åœºæ™¯**ï¼š
- ä¸Šä¼ åˆ° Render Secret Files
- ç›´æ¥è¢«åç«¯è¯»å–
- æœ€å°åŒ–æ–‡ä»¶å¤§å°

**ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªç‰ˆæœ¬ï¼Ÿ**
- Render Secret Files åªéœ€è¦è®¤è¯ä¿¡æ¯
- å¤‡æ³¨å’Œæ—¶é—´ä¿¡æ¯ä¸å½±å“ç™»å½•
- ä¿æŒéƒ¨ç½²æ–‡ä»¶ç®€æ´
- æœ¬åœ°ä¿ç•™å®Œæ•´ä¿¡æ¯ä¾¿äºç®¡ç†

## å·¥ä½œæµç¨‹ç¤ºä¾‹

### å®Œæ•´å·¥ä½œæµç¨‹

1. **æœ¬åœ°ç®¡ç†ç”¨æˆ·**
   ```bash
   # æ‰“å¼€ç®¡ç†ç•Œé¢
   ç”¨æˆ·ç®¡ç†.html
   ```

2. **æ·»åŠ ç”¨æˆ·å¹¶å¡«å†™ä¿¡æ¯**
   - ç”¨æˆ·å: `alfred777`
   - å¯†ç : `alfred777`
   - å¤‡æ³¨: `Alfred - åˆ›å§‹äºº - ç³»ç»Ÿç®¡ç†å‘˜`

3. **å¯¼å‡ºä¸¤ä¸ªç‰ˆæœ¬**
   - ç‚¹å‡» "ä¸‹è½½å®Œæ•´ç‰ˆ users_full.json" â†’ ä¿å­˜åˆ°æœ¬åœ°
   - ç‚¹å‡» "ä¸‹è½½éƒ¨ç½²ç‰ˆ users.json" â†’ ç”¨äºä¸Šä¼ 

4. **ä¸Šä¼ åˆ° Render**
   - å¤åˆ¶ users.json çš„å†…å®¹
   - ç²˜è´´åˆ° Render Secret Files
   - Filename: `backend/user_management/users.json`

5. **æœ¬åœ°ä¿å­˜å®Œæ•´ç‰ˆ**
   - å°† users_full.json ä¿å­˜åˆ°å®‰å…¨ä½ç½®
   - ä¸‹æ¬¡éœ€è¦ä¿®æ”¹æ—¶é‡æ–°å¯¼å…¥

### å¿«é€Ÿæ›´æ–°ç”¨æˆ·

å¦‚æœéœ€è¦æ·»åŠ æ–°ç”¨æˆ·ï¼š

1. å¯¼å…¥ users_full.json åˆ°ç®¡ç†ç•Œé¢
2. æ·»åŠ æ–°ç”¨æˆ·
3. é‡æ–°å¯¼å‡ºä¸¤ä¸ªç‰ˆæœ¬
4. æ›´æ–° Render Secret Files

### Render

âœ… **æ”¯æŒ Secret Files**
- æœ€å®‰å…¨çš„æ–¹å¼
- æ–‡ä»¶ä¸ä¼šå‡ºç°åœ¨æ—¥å¿—ä¸­
- æ”¯æŒæ–‡ä»¶æ›´æ–°

### Vercel

âŒ **ä¸æ”¯æŒæ–‡ä»¶ç³»ç»Ÿå†™å…¥**

éœ€è¦æ”¹ç”¨ï¼š
1. ç¯å¢ƒå˜é‡å­˜å‚¨ç”¨æˆ·ä¿¡æ¯
2. å¤–éƒ¨æ•°æ®åº“ï¼ˆPostgreSQLï¼‰
3. Vercel KV å­˜å‚¨

### Railway

âœ… **æ”¯æŒ Volume Mounts**
- å¯ä»¥æŒ‚è½½é…ç½®æ–‡ä»¶
- æ”¯æŒæŒä¹…åŒ–å­˜å‚¨

### Heroku

âœ… **æ”¯æŒ Config Vars**
- å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®
- æˆ–ä½¿ç”¨ Heroku Postgres

## å®‰å…¨æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰æ£€æŸ¥ï¼š

- [ ] `users.json` åœ¨ `.gitignore` ä¸­
- [ ] å·²é€šè¿‡ Secret Files ä¸Šä¼ ç”¨æˆ·æ–‡ä»¶
- [ ] æµ‹è¯•ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å¼ºå¯†ç 
- [ ] åˆ é™¤æˆ–ç¦ç”¨ä¸éœ€è¦çš„æµ‹è¯•è´¦å·
- [ ] è®¾ç½®äº† `SECRET_KEY` ç¯å¢ƒå˜é‡
- [ ] å¯ç”¨äº† HTTPS

éƒ¨ç½²åæ£€æŸ¥ï¼š

- [ ] å¯ä»¥æ­£å¸¸è®¿é—®ç™»å½•é¡µé¢
- [ ] å¯ä»¥ä½¿ç”¨è´¦å·ç™»å½•
- [ ] å·²ä¿®æ”¹é»˜è®¤å¯†ç 
- [ ] æ—¥å¿—ä¸­æ²¡æœ‰å¯†ç ç›¸å…³é”™è¯¯
- [ ] Session åŠŸèƒ½æ­£å¸¸

## æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šæ— æ³•ç™»å½•ï¼Œæç¤º"ç”¨æˆ·åæˆ–å¯†ç ä¸æ­£ç¡®"

**å¯èƒ½åŸå› **ï¼š
1. `users.json` æ–‡ä»¶ä¸å­˜åœ¨
2. æ–‡ä»¶è·¯å¾„ä¸æ­£ç¡®
3. å¯†ç å“ˆå¸Œå€¼æŸå

**è§£å†³æ–¹æ³•**ï¼š
```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la backend/user_management/users.json

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
# Render: Dashboard -> Logs
# æŸ¥æ‰¾: "è­¦å‘Šï¼š'users.json' æ–‡ä»¶æœªæ‰¾åˆ°æˆ–æ ¼å¼é”™è¯¯"
```

### é—®é¢˜ï¼šéƒ¨ç½²å users.json ä¸¢å¤±

**åŸå› **ï¼šæ–‡ä»¶ç³»ç»Ÿä¸æŒä¹…åŒ–

**è§£å†³æ–¹æ³•**ï¼š
1. ä½¿ç”¨ Secret Files
2. ä½¿ç”¨æ•°æ®åº“å­˜å‚¨ç”¨æˆ·
3. ä½¿ç”¨ç¯å¢ƒå˜é‡

### é—®é¢˜ï¼šä¿®æ”¹å¯†ç åæ— æ³•ç™»å½•

**åŸå› **ï¼šå¯†ç å“ˆå¸Œæ ¼å¼ä¸æ­£ç¡®

**è§£å†³æ–¹æ³•**ï¼š
```python
# ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„æ–¹æ³•ç”Ÿæˆå“ˆå¸Œ
from werkzeug.security import generate_password_hash
hash_value = generate_password_hash('your_password')
```

## é«˜çº§é…ç½®

### ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†ç”¨æˆ·

ä¿®æ”¹ `backend/services/auth_service.py`ï¼š

```python
import os
import json

@staticmethod
def load_users():
    # ä¼˜å…ˆä»ç¯å¢ƒå˜é‡è¯»å–
    users_json = os.environ.get('USERS_JSON')
    if users_json:
        return json.loads(users_json)
    
    # å¦åˆ™ä»æ–‡ä»¶è¯»å–
    try:
        with open(USERS_FILE, 'r') as f:
            return json.load(f)
    except (FileNotFoundError, json.JSONDecodeError):
        return {}
```

åœ¨ Render ç¯å¢ƒå˜é‡ä¸­è®¾ç½®ï¼š
```
USERS_JSON={"admin":"scrypt:32768:8:1$...","demo":"scrypt:32768:8:1$..."}
```

### ä½¿ç”¨æ•°æ®åº“å­˜å‚¨ç”¨æˆ·

åˆ›å»ºç”¨æˆ·è¡¨ï¼š
```sql
CREATE TABLE users (
    username VARCHAR(255) PRIMARY KEY,
    password_hash TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT NOW()
);
```

ä¿®æ”¹è®¤è¯æœåŠ¡ä»æ•°æ®åº“è¯»å–ã€‚

## ç›¸å…³æ–‡æ¡£

- [ç”¨æˆ·ç®¡ç†æŒ‡å—](docs/USER_MANAGEMENT_GUIDE.md)
- [å¯†ç é‡ç½®æŒ‡å—](docs/USER_PASSWORD_RESET_GUIDE.md)
- [å®‰å…¨æŒ‡å—](docs/SECURITY_GUIDE.md)
- [éƒ¨ç½²æŒ‡å—](docs/deployment/RENDER_DEPLOYMENT_GUIDE.md)

## è”ç³»æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ï¼š
- é‚®ç®±: freecasafred@outlook.com
- æŸ¥çœ‹æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
