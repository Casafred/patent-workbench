## 计划：为功能七添加GLM OCR可选识别模式

### 第一阶段：GLM OCR API测试验证

**步骤1.1** 创建独立测试脚本
- 编写Python测试脚本，调用GLM OCR版面解析API
- 使用 `test_data/test ocr.png` 作为测试图片
- 验证返回的坐标格式和识别准确度

**步骤1.2** 对比测试
- 使用相同图片分别测试RapidOCR和GLM OCR
- 对比识别准确率、坐标精度、处理速度
- 确认GLM OCR能满足附图标记识别需求

### 第二阶段：后端集成

**步骤2.1** 新增GLM OCR工具模块
- 在 `backend/utils/` 创建 `glm_ocr_utils.py`
- 实现GLM OCR调用函数，返回与RapidOCR统一格式
- 处理坐标转换（归一化→像素坐标）

**步骤2.2** 修改API接口
- 在 `drawing_marker.py` 的 `/drawing-marker/process` 接口添加 `ocr_mode` 参数
- 支持 `rapidocr`（默认，免费）和 `glm_ocr`（API调用）两种模式
- 根据模式选择调用不同的OCR函数

### 第三阶段：前端集成

**步骤3.1** 添加OCR模式选择UI
- 在 `drawing-marker.html` 添加OCR模式选择下拉框
- 选项：`内置RapidOCR（免费）` / `GLM OCR API（更精准）`
- 显示简要说明

**步骤3.2** 更新前端请求逻辑
- 修改前端JS，传递 `ocr_mode` 参数到后端
- 处理不同OCR模式的响应

### 第四阶段：测试与优化

**步骤4.1** 功能测试
- 测试两种OCR模式的完整流程
- 验证标注结果正确性

**步骤4.2** 边界情况处理
- API调用失败时的降级处理
- 网络超时处理