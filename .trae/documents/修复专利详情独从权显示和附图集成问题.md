## 问题分析

### 1. 独从权显示问题

**Google Patents HTML结构**：
- 独立权利要求：`<li class="claim">` 或 `<div class="claim">`
- 从属权利要求：`<li class="claim-dependent">`

**后端代码**（simple_scraper.py）已正确识别类型，但前端解析逻辑有问题：
- 前端代码在 `patent-detail-html.js` 和 `patentDetailNewTab.js` 中使用中文关键词检测（如"其特征在于"、"根据权利要求"），这对英文专利无效
- 后端已添加 `[从属]` 标记，但前端检测逻辑会覆盖这个标记

### 2. 附图集成问题

**Google Patents HTML结构**：
```html
<li itemprop="images" itemscope repeat>
  <img itemprop="thumbnail" src="...">
  <meta itemprop="full" content="...">
</li>
```

**后端代码**没有从这个结构提取附图，只依赖PDF链接构造图片URL。

---

## 修复计划

### 修复1：后端附图提取（simple_scraper.py）
添加从 `itemprop="images"` 结构提取附图的逻辑：
- 查找 `<li itemprop="images">` 元素
- 提取 `<meta itemprop="full">` 的 content 属性作为高清图URL
- 提取 `<img itemprop="thumbnail">` 的 src 作为缩略图URL

### 修复2：前端独从权解析（patent-detail-html.js）
修改权利要求类型检测逻辑：
- 优先检查后端添加的 `[从属]` 标记
- 移除对中文关键词的依赖（英文专利不适用）
- 简化检测逻辑，直接使用后端标记

### 修复3：新标签页独从权解析（patentDetailNewTab.js）
同步修改前端解析逻辑，与 patent-detail-html.js 保持一致。

---

## 涉及文件
1. `backend/scraper/simple_scraper.py` - 添加附图提取逻辑
2. `js/main/patent-detail-html.js` - 修复独从权解析
3. `js/patentDetailNewTab.js` - 修复独从权解析